<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.1 Course Introduction &amp; Review Topics | MAD9022</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" type="image/svg" href="/w2025/assets/javascript.svg">
    <link rel="shortcut icon" type="image/svg" href="/w2025/assets/javascript.svg">
    <meta name="description" content="Fullstack: Frontend Development Course">
    
    <link rel="preload" href="/w2025/assets/css/0.styles.33415ee0.css" as="style"><link rel="preload" href="/w2025/assets/js/app.87c858a9.js" as="script"><link rel="preload" href="/w2025/assets/js/2.ccdb61a5.js" as="script"><link rel="preload" href="/w2025/assets/js/32.cfce5625.js" as="script"><link rel="preload" href="/w2025/assets/js/9.01890ce5.js" as="script"><link rel="preload" href="/w2025/assets/js/11.5fe5a40b.js" as="script"><link rel="prefetch" href="/w2025/assets/js/10.3e691a48.js"><link rel="prefetch" href="/w2025/assets/js/12.f49551e7.js"><link rel="prefetch" href="/w2025/assets/js/13.d5974a84.js"><link rel="prefetch" href="/w2025/assets/js/14.32f7e6e8.js"><link rel="prefetch" href="/w2025/assets/js/15.0ae027c8.js"><link rel="prefetch" href="/w2025/assets/js/16.f2386a1e.js"><link rel="prefetch" href="/w2025/assets/js/17.d7b9d534.js"><link rel="prefetch" href="/w2025/assets/js/18.7c15b945.js"><link rel="prefetch" href="/w2025/assets/js/19.51980183.js"><link rel="prefetch" href="/w2025/assets/js/20.d519c082.js"><link rel="prefetch" href="/w2025/assets/js/21.362f6b8c.js"><link rel="prefetch" href="/w2025/assets/js/22.afaf2123.js"><link rel="prefetch" href="/w2025/assets/js/23.cdc2c887.js"><link rel="prefetch" href="/w2025/assets/js/24.9b75b7c6.js"><link rel="prefetch" href="/w2025/assets/js/25.e357a328.js"><link rel="prefetch" href="/w2025/assets/js/26.6e814142.js"><link rel="prefetch" href="/w2025/assets/js/27.106c07bd.js"><link rel="prefetch" href="/w2025/assets/js/28.126c37bf.js"><link rel="prefetch" href="/w2025/assets/js/29.ca946c51.js"><link rel="prefetch" href="/w2025/assets/js/3.05989ff3.js"><link rel="prefetch" href="/w2025/assets/js/30.2ba498f6.js"><link rel="prefetch" href="/w2025/assets/js/31.e41d2241.js"><link rel="prefetch" href="/w2025/assets/js/33.3dc1268c.js"><link rel="prefetch" href="/w2025/assets/js/34.a3793153.js"><link rel="prefetch" href="/w2025/assets/js/35.ab1290f2.js"><link rel="prefetch" href="/w2025/assets/js/36.3d9064e0.js"><link rel="prefetch" href="/w2025/assets/js/37.2ae4164b.js"><link rel="prefetch" href="/w2025/assets/js/38.195bef2c.js"><link rel="prefetch" href="/w2025/assets/js/39.a9904a96.js"><link rel="prefetch" href="/w2025/assets/js/4.79533d7f.js"><link rel="prefetch" href="/w2025/assets/js/40.1c93503b.js"><link rel="prefetch" href="/w2025/assets/js/41.61991e2b.js"><link rel="prefetch" href="/w2025/assets/js/42.87d5cabf.js"><link rel="prefetch" href="/w2025/assets/js/43.d8a479ef.js"><link rel="prefetch" href="/w2025/assets/js/44.8446907e.js"><link rel="prefetch" href="/w2025/assets/js/45.d1e73d03.js"><link rel="prefetch" href="/w2025/assets/js/46.14dd0c4d.js"><link rel="prefetch" href="/w2025/assets/js/47.6eae941d.js"><link rel="prefetch" href="/w2025/assets/js/48.4b257292.js"><link rel="prefetch" href="/w2025/assets/js/49.7c622f43.js"><link rel="prefetch" href="/w2025/assets/js/5.60adfd1c.js"><link rel="prefetch" href="/w2025/assets/js/50.5cc4788b.js"><link rel="prefetch" href="/w2025/assets/js/51.345ce69e.js"><link rel="prefetch" href="/w2025/assets/js/52.59f792c0.js"><link rel="prefetch" href="/w2025/assets/js/53.9344eea4.js"><link rel="prefetch" href="/w2025/assets/js/6.96402398.js"><link rel="prefetch" href="/w2025/assets/js/7.956989e6.js"><link rel="prefetch" href="/w2025/assets/js/8.62f5a92b.js">
    <link rel="stylesheet" href="/w2025/assets/css/0.styles.33415ee0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2025/" class="home-link router-link-active"><img src="/w2025/mad-d-logo-sm.png" alt="MAD9022" class="logo"> <span class="site-name can-hide">MAD9022</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hybrid</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>PWA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2025/modules/pwas/week1/1.1/" aria-current="page" class="active sidebar-link">1.1: Course Intro &amp; Review</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week1/1.1/#introductory-topics" class="sidebar-link">Introductory Topics</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week1/1.1/#functions" class="sidebar-link">Functions</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week1/1.1/#modules-and-namespaces" class="sidebar-link">Modules and Namespaces</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week1/1.1/#promises-asynchronous-programming-event-loop" class="sidebar-link">Promises, Asynchronous Programming, Event Loop</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week1/1.1/#fetch" class="sidebar-link">Fetch</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week1/1.1/#todo-this-week" class="sidebar-link">ToDo This Week</a></li></ul></li><li><a href="/w2025/modules/pwas/week1/1.2/" class="sidebar-link">1.2: Review Topics</a></li><li><a href="/w2025/modules/pwas/week2/2.1/" class="sidebar-link">2.1: Single Page Applications</a></li><li><a href="/w2025/modules/pwas/week2/2.2/" class="sidebar-link">2.2: SPA &amp; Coding Practices</a></li><li><a href="/w2025/modules/pwas/week3/3.1/" class="sidebar-link">3.1: Workers &amp; Service Workers</a></li><li><a href="/w2025/modules/pwas/week3/3.2/" class="sidebar-link">3.2: Service Worker Events</a></li><li><a href="/w2025/modules/pwas/week4/4.1/" class="sidebar-link">4.1: Messaging</a></li><li><a href="/w2025/modules/pwas/week4/4.2/" class="sidebar-link">4.2: Intro to PWAs</a></li><li><a href="/w2025/modules/pwas/week5/5.1/" class="sidebar-link">5.1: PWAs Continued</a></li><li><a href="/w2025/modules/pwas/week5/5.2/" class="sidebar-link">5.2: IndexedDB &amp; Data</a></li><li><a href="/w2025/modules/pwas/week6/6.1/" class="sidebar-link">6.1: Hosting Projects</a></li><li><a href="/w2025/modules/pwas/week6/6.2/" class="sidebar-link">6.2: PWA Project</a></li><li><a href="/w2025/modules/pwas/week7/7.1/" class="sidebar-link">7.1: Git Pull Requests</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title red">
    PWA
  </div> <h1>1.1 Course Introduction &amp; Review Topics</h1> <div class="underdev no">Module Still Under Development</div></header> <h2 id="introductory-topics"><a href="#introductory-topics" class="header-anchor">#</a> Introductory Topics</h2> <p>These are the topics that we will be discussing in the first class.</p> <ul><li>Course Topics</li> <li>Workload</li> <li>Assignments and Deliverables</li> <li>Hybrid portion of course</li> <li>The connection between MAD9124 and MAD9022</li> <li>Slack channel and workspace</li> <li>Plagiarism</li> <li>Chatgpt and code pilot</li> <li>Concept Review</li></ul> <h2 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h2> <p>Functions are the core of every script that we write. When we turn user requirements and features into code, functions are how we organize the logic of our scripts.</p> <p>There are several ways that we can write functions.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//a named function declaration</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">teddy</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//a function expression. Less common.</span>
  <span class="token comment">//the order of the functions matters.</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//an anonymous function has no name</span>
  <span class="token comment">//without a name it CANNOT be called</span>
<span class="token punctuation">}</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//an IIFE - Immediately Invoked Function Expression</span>
  <span class="token comment">//a good use for an anonymous function</span>
  <span class="token comment">//this function is calling itself immediately to start running</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//named functions should be used with event listeners</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//an anonymous function should ONLY be used with event listeners</span>
  <span class="token comment">//if there is one or two lines that will never be used anywhere else in the site.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">tina</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">//an arrow function with curly braces</span>
  <span class="token keyword">return</span> <span class="token string">'tina'</span><span class="token punctuation">;</span> <span class="token comment">//needs a return statement</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">louise</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token string">'louise'</span><span class="token punctuation">;</span>
<span class="token comment">//an arrow function without curly braces</span>
<span class="token comment">//only allowed to have the one line of code</span>
<span class="token comment">//returns the result of the single line expression.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>In many cases, the arrow functions can be used interchangeably with a regular function.</p> <p>Do <strong>NOT</strong> use arrow functions if you need to include the keyword <code>this</code>. This means that you will not want to use them inside JavaScript classes.</p> <p>If you are adding an event listener and it will have a function with one or two lines of code, then this would be a good place to use an arrow function.</p> <p>If you are going to be creating functions to use with the Array map and filter methods, these will often only have a single line of code. Arrow functions can be a good way to create these.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//create a new array of objects that only contains objects with an admin</span>
<span class="token comment">//property with a value of true</span>
<span class="token keyword">let</span> filteredArr <span class="token operator">=</span> originalArr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>admin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>If we were not using an arrow function then the above line of code would become:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> filteredArr <span class="token operator">=</span> originalArr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">.</span>admin<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Not a huge difference but the first version is more readable.</p> <h2 id="modules-and-namespaces"><a href="#modules-and-namespaces" class="header-anchor">#</a> Modules and Namespaces</h2> <p>ES6 added the ability for us to use modules as part of our code structure. Before this, we could use namespaces or IIFEs to wrap our code and create new scopes.</p> <p>Here is an example of a namespace that contains one property and two methods.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//app.js</span>
<span class="token keyword">const</span> <span class="token constant">APP</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">prop1</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function-variable function">method1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//do something</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">method2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//do something else</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>This namespace could be in its own JavaScript file called something like <code>app.js</code>. All the files would be added to the HTML file.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>With the two files added to the HTML file, the script in the two files both had access to all of the global properties and methods in both files.</p> <p>So, this meant that we had to be careful to avoid naming conflicts at the top level.</p> <p>With modules, every file automatically gets its own scope. Each file is a module. When we import a file, we are importing a Module object that contains references to everything that is exported from the module file.</p> <p>We use the keywords <code>import</code> and <code>export</code> to control what can be accessed inside each module. Alternatively, we can use the <code>import()</code> method to dynamically import a module at run-time instead of as the files are being loaded.</p> <p>The file with the APP namespace could be turned into a module like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//app.js</span>
<span class="token keyword">let</span> prop1 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prop1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//do something else</span>
<span class="token punctuation">}</span>
<span class="token comment">//allow external access to all three things</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> prop1<span class="token punctuation">,</span> method1<span class="token punctuation">,</span> method2 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Then we import the three items into our main.js file.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> prop1<span class="token punctuation">,</span> method1<span class="token punctuation">,</span> method2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If we were not the original author of app.js and there was a naming conflict, we can rename the property or method as part of our import statement. Let's say that we need to rename prop1 and method1.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> prop1 <span class="token keyword">as</span> p1<span class="token punctuation">,</span> method1 <span class="token keyword">as</span> m1<span class="token punctuation">,</span> method2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>We do not need to export everything from a module. We only need to export the items that need to be used externally. The items that are not export can be considered as private to the module and inaccessible to any code outside the file.</p> <p>If we want, we can make one item from the module a default export.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//app.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> method1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>This means that we will not need the <code>{}</code> around the name of the imported item and we can call it anything we want.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//main.js</span>
<span class="token keyword">import</span> mymethod <span class="token keyword">from</span> <span class="token string">'./app.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Now, inside of main.js, the name <code>mymethod</code> will be a reference to the <code>method1</code> function inside of app.js.</p> <p>The key to using modules in the browser is to give the script files the extension <code>.mjs</code> or <code>.ejs</code> OR to keep the extension as <code>.js</code> and add the <code>type=&quot;module&quot;</code> attribute in the script tag for the first script that will be doing the imports. The type attribute is the approach used as the common convention.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>With <code>type=&quot;module&quot;</code> added to the main.js script, it will be allowed to use <code>import</code> or <code>import()</code>.</p> <h3 id="using-import-method"><a href="#using-import-method" class="header-anchor">#</a> Using import() method</h3> <p>The <code>import()</code> method lets us import a module at run-time. This means that we can import a file as a reaction to a user interaction or a fetch call or some other Promise.</p> <p>Calling the method will return a Promise object that will resolve to a Module object. The exported items will be available inside the Module object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//using async / await with import()</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> module <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//now we can call the methods</span>
  module<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getMod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mod</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//mod is the module object</span>
    mod<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mod<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getTheMod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>someVar <span class="token operator">===</span> someValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//just run the file and let it do it's thing</span>
    <span class="token comment">//this could be a web component. Nothing to import to this file</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>The <code>.catch()</code> method after the <code>.then()</code> will handle the failure to import.</p> <p>If you want to skip the <code>module</code> variable for the imported items, you can use destructuring.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> method1<span class="token punctuation">,</span> method2 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//use the methods here</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> method1<span class="token punctuation">,</span> method2 <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//use the methods here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>More about destructuring in Module 1.2 and in <a href="https://mad9014.github.io/f2024/modules/browser-js/week13/destructure/#destructuring" target="_blank" rel="noopener noreferrer">the mad9014 notes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="promises-asynchronous-programming-event-loop"><a href="#promises-asynchronous-programming-event-loop" class="header-anchor">#</a> Promises, Asynchronous Programming, Event Loop</h2> <p>A <code>Promise</code> is a primary structure to be used with asynchronous programming.</p> <p>You already have good references for <code>Promise</code> and asynchronous programming in the MAD9014 notes. <a href="https://mad9014.github.io/f2024/modules/browser-js/week9/promises/" target="_blank" rel="noopener noreferrer">Module 9.1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and
<a href="https://mad9014.github.io/f2024/modules/browser-js/week9/async/" target="_blank" rel="noopener noreferrer">Module 9.2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> explain Promises, async - await, and the event loop.</p> <div title="Tasks, Microtasks, and the Event Loop" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/w-jULX0D5cg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://gist.github.com/prof3ssorSt3v3/4441d61fc2aa260e838d3380a7237bda" target="_blank" rel="noopener noreferrer">Here is the code from that video<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>When you create an event listener, the function is put aside in a holding area waiting to be told that the event has occurred. When the event happens, the function is moved into the task queue. The
next time around the event loop, the next task will get run. <code>setInterval</code> and <code>setTimeout</code> also use the task queue for their functions.</p> <p>Promises get added to another queue called the microtask queue. MutationObservers also use the microtask queue. The main differences between the task and microtask queue are the order that they are
called from the event loop, and that the microtask wants to empty all of its tasks before continuing, whereas the task queue runs one of its tasks per time through the event loop.</p> <p>This video gives a great explanation of the Event Loop.</p> <div title="Jake Archibald JSConf Event Loop" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/cCOL7MC4Pl0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <p>One other good <a href="https://www.lydiahallie.com/blog/event-loop" target="_blank" rel="noopener noreferrer">reference for the Event Loop by Lydia Hallie<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="promises-vs-callbacks"><a href="#promises-vs-callbacks" class="header-anchor">#</a> Promises vs Callbacks</h3> <p>If we have a function that we want to run after an initial function, we can pass a reference to the second function when calling the first one. We call the second function a callback function.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//do something first and then</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//do something else</span>
<span class="token punctuation">}</span>

<span class="token comment">//call the first function and give it the reference to the callback</span>
<span class="token function">first</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//notice just the name of the callback is added.</span>
<span class="token comment">//No parentheses after `second`</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Before Promises were added to JavaScript, callbacks were the approach to creating a sequence of functions.</p> <p>With Promises we can use <code>async</code> <code>await</code> or <code>.then()</code> to chain the functions and create a sequence of steps.</p> <p>Either approach can be used. Both are valid. Promises are the newer approach. You will see them a lot in code, but this doesn't mean that callbacks are no longer used and it doesn't mean that callbacks are invalid.</p> <p>If you want to learn about how to turn older code that uses callbacks into a Promise-based version, then you can <a href="https://dev.to/prof3ssorst3v3/you-can-convert-your-callbacks-to-promises-141n" target="_blank" rel="noopener noreferrer">read this short tutorial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="async-await"><a href="#async-await" class="header-anchor">#</a> Async Await</h3> <p>The <code>async</code> and <code>await</code> keywords are a way of converting an ordinary function into one that can be paused to wait for the completion of one or more promises.</p> <p>Here is an example of a typical function. The log calls will happen in the order of the numbers - one, two , three.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">basic</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'three'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>With <code>async</code> and <code>await</code> you can tell the function that you might want to pause and wait for an asynchronous (Promise) call to be finished before proceeding.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">basic</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'three'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>This version of the function would log the numbers as - one, three, two.</p> <h3 id="functions-and-promises"><a href="#functions-and-promises" class="header-anchor">#</a> Functions and Promises</h3> <p>When it comes to synchronous code things happen in a logical sequence. The first line of code runs first. Function calls run and complete before moving to the next line of code. In the following
example, the three variables <code>result1</code>, <code>result2</code>, <code>result3</code> will all be assigned a return value from the associated functions.</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">dosomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">firstfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">secondfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result3 <span class="token operator">=</span> <span class="token function">thirdfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">,</span> result3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>This works and it is easy to see how. However, if any of those three functions are asynchronous then this will not work. The final line will run before the result is back from any asynchronous
function.</p> <p>If you ever need to test and check if a function is asynchronous, you can check to see what constructor was used to create the function. If a function is created with a signature like
<code>async function x(){ }</code> then you can use <code>x.constructor.name === 'AsyncFunction'</code> to test it.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dosomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result1<span class="token punctuation">,</span> result2<span class="token punctuation">,</span> result3<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstfunc<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'AsyncFunction'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">firstfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result1 <span class="token operator">=</span> <span class="token function">firstfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>secondfunc<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'AsyncFunction'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">secondfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result2 <span class="token operator">=</span> <span class="token function">secondfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>thirdfunc<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'AsyncFunction'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result3 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">thirdfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result3 <span class="token operator">=</span> <span class="token function">thirdfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">,</span> result3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Technically, for this example you could just put <code>await</code> in front of each function call, regardless of whether or not it is an asynchronous one, but this won't always be the case. There may be times
when you need to know whether or not a function is asynchronous or not.</p> <p>Now, if you know that the function that you are calling is going to return a <code>Promise</code>, then you can write your code to address that.</p> <p>Say you have several modules that you are importing to use and that they have a series of methods which will return a <code>Promise</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getPeopleFromDatabase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'db.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getImagesFromCache <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'cache.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getInfoFromAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'api.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Each of those methods will return a <code>Promise</code>. A <code>Promise</code> will either <code>resolve</code> or <code>reject</code>. It will either work or fail with an error. That means we have to wrap everything in a
<code>try{ }catch(err){ }</code> OR we can chain the calls together in a series of <code>then()</code> methods with a single <code>catch()</code> at the end.</p> <p>Just decide on the order that you need these methods to run.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">getPeopleFromDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resultFromDB</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//use the results from the DB</span>
      <span class="token keyword">return</span> <span class="token function">getInfoFromAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resultFromAPI</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//use the results from the API</span>
      <span class="token keyword">return</span> <span class="token function">getImagesFromCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resultFromCache</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//use the results from the cache</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//handle the error from one of the promises</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'DBError'</span><span class="token operator">:</span>
          <span class="token comment">//handle an error from the DB</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'APIError'</span><span class="token operator">:</span>
          <span class="token comment">//special error from the API call</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'CacheError'</span><span class="token operator">:</span>
          <span class="token comment">//special error from the Cache call</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'Error'</span><span class="token operator">:</span>
        <span class="token comment">//a general JavaScript error</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>The <code>catch</code> method in the code above is looking at the <code>name</code> property of the error object. JavaScript has a series of built-in error types - <code>EvalError</code>, <code>InternalError</code>, <code>RangeError</code>,
<code>ReferenceError</code>, <code>SyntaxError</code>, <code>TypeError</code>, and <code>URIError</code>. These are all built on top of the base <code>Error</code> object.</p> <p>If you want, you can create your OWN error types to use in your code.</p> <p>The JavaScript Class syntax is an easy way to do this. Here is an example of how to create your own custom error.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">HungryError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
  thirstyToo<span class="token punctuation">;</span>
  message <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> thirstyToo <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">'HungryError'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//the name property</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'HungryError'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>thirstyToo <span class="token operator">=</span> thirstyToo<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> HungryError <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>This <code>HungryError</code> has the <code>name</code> property which gets saved via the <code>Error</code> class. Then it saves the <code>message</code> in an instance variable belonging to the <code>HungryError</code> object that you create. The thing
that differentiates <code>HungryError</code> from the basic <code>Error</code> is the <code>thirstyToo</code> property.</p> <p>If you want to use this error in a file that you create...</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HungryError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hungry-error.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">dosomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//do some things</span>
    <span class="token comment">//pretend that it fails</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HungryError</span><span class="token punctuation">(</span><span class="token string">'Too hungry to code'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//HungryError</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Too hungry to code</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>thirstyToo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="promise-methods"><a href="#promise-methods" class="header-anchor">#</a> Promise Methods</h3> <p>In addition to the <code>.then()</code>, <code>.catch()</code>, <code>resolve()</code>, and <code>reject()</code> methods that you can use with a single Promise, there are times when you need to deal with multiple ones. Any time that you want to deal with multiple promises at the same time any you don't want to take the next step in your code before ALL the promises have resolved, then you can use one of these methods - <code>all</code>, <code>race</code>, <code>allSettled</code>, and <code>any</code>.</p> <ul><li><code>all</code> waits for all of the Promises to be resolved or rejects when the first one is rejected.</li> <li><code>allSettled</code> waits for all the Promises to be resolved or rejected. Provides array of all results and errors. Rejects if ALL the promises are rejected.</li> <li><code>race</code> waits for the first response (resolve or reject) to call <code>then</code> or <code>catch</code>.</li> <li><code>any</code> waits for the first successful resolve. Only rejects if all the promises fail.</li></ul> <p>For <code>all</code> and <code>allSettled</code> you will have an array of results passed to the <code>.then(results=&gt;{})</code>.</p> <p>For <code>race</code> and <code>any</code> you will get the one result, just like calling a single Promise.</p> <p>When you get an array of results from <code>all</code> or <code>allSettled</code>, each of the values in the array is an object with two main properties - <code>status</code> and <code>value</code>. Inside the <code>then</code> method, all the <code>status</code> values will be <code>fulfilled</code>. The <code>value</code> properties will be the actual object returned by the promise. For example, with a call to <code>fetch()</code>, the <code>value</code> will be a <code>Response</code> object.</p> <div class="custom-block tip"><p class="custom-block-title">Key point for Promise.all</p> <p>When working with the Cache API and Service Workers, you will need to be able to handle multiple Promise-based function calls at the same time. To do this you will need to use <code>Promise.all()</code>.</p></div> <p>Remember to view <a href="https://mad9014.github.io/f2024/modules/browser-js/week9/promises/#promises" target="_blank" rel="noopener noreferrer">the MAD9014 promise content<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more information.</p> <h2 id="fetch"><a href="#fetch" class="header-anchor">#</a> Fetch</h2> <p>This video covers everything that you need to know about using the Fetch API.</p> <p>Watch this video this week. Refer back to it as a reference when working with <code>Fetch</code>, <code>Request</code> objects, <code>Response</code> objects, and <code>URL</code> objects.</p> <div title="Ten Steps to Mastering Fetch" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/2sQ9xiEAXNo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h3 id="requests-and-responses"><a href="#requests-and-responses" class="header-anchor">#</a> Requests and Responses</h3> <p>As files are passed back and forth between the browser and the server, they need to be wrapped inside a <code>Request</code> or <code>Response</code> object. Each of these objects have a <code>body</code> property which holds the
file.</p> <p>The <code>Request</code> object gets a <code>String</code> value, or <code>FormData</code> object, or a <code>File</code> object assigned to the <code>body</code> property.</p> <p>The <code>Response</code> object needs to use a method to extract the file from the <code>body</code> property. The most common methods are <code>text()</code>, <code>json()</code>, or <code>blob()</code>, which are used for HTML/XML, JSON, or media
files.</p> <p>The <code>Response</code> object also has an <code>ok</code> property which is a Boolean indicating success receiving a response with a status code between 200 and 299. The <code>status</code> and <code>statusText</code> properties tell you the
exact status of the response.</p> <p>If you want details about the contents of the response your best option is the <code>headers</code> property, which has a <code>get</code> method. It can be passed the name of any header and it will return the value of
that header.</p> <h3 id="json-vs-js"><a href="#json-vs-js" class="header-anchor">#</a> JSON vs JS</h3> <p>JSON and JavaScript are both text file types - <code>application/json</code> and <code>text/javascript</code>.</p> <p>The difference is that the first is a data format (just data) and the latter is a file format that is read and interpreted by a JavaScript engine such as V8.</p> <p>When writing objects in JS, the keys are only allowed to be strings. The quotation marks can be omitted for the keys. The quotation marks for the values can be single, double, or backticks. JavaScript
allows for trailing commas, comments, and expects variables to be declared to hold the values.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//this is a comment about some data</span>
<span class="token comment">//this is an array of objects</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Sam'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'sam@work.org'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Dean'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'dean@work.org'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Cas'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'cas@work.org'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The JSON version of the same information would look very similar. All the quotation marks need to be double quotes. No comments are allowed. No trailing commas are allowed.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sam&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sam@work.org&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Dean&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dean@work.org&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cas&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cas@work.org&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>JSON is just one type of data file. Text data can be saved as <code>json</code>, <code>txt</code>, <code>xml</code>, <code>csv</code>, <code>html</code>, <code>tsv</code>, or other formats. The purpose of any of these formats is just to be able to transfer
information between different computers or between different computers.</p> <p>Web Services largely work by sending information back and forth as these files.</p> <p>Some Web Services also use web sockets to transfer data as a stream. But that's a topic for another day.</p> <h3 id="url-objects"><a href="#url-objects" class="header-anchor">#</a> URL objects</h3> <p>The <code>fetch</code> method can accept three different types of initial arguments.</p> <ol><li>A <code>String</code> which is a url.</li> <li>A <code>URL</code> object built from a string.</li> <li>A <code>Request</code> object that contains a <code>URL</code> object.</li></ol> <p>If you pass a <code>String</code> to the <code>fetch</code> method, it will wrap that in a <code>URL</code> which will in turn be wrapped in a <code>Request</code> object.</p> <p>The <code>Request</code> object has a <code>url</code> property that contains the <code>URL</code> object.</p> <p>The benefit of using a <code>Request</code> instead of a <code>String</code> is that the <code>Request</code> has already divided the string url into a series of properties that represent each of the parts of the url, like
<code>protocol</code>, <code>pathname</code>, <code>host</code>, etc.</p> <p>The other benefit that you get with a <code>URL</code> object is the ability to create a <code>URL</code> that points to some data in memory. Let's say that you do a fetch for an image. The <code>Response</code> object back from the
server will contain the binary data for the image.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> blobData <span class="token operator">=</span> <span class="token keyword">await</span> myImageResponseObject<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blobData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The binary data can then be passed to the <code>URL.createObjectURL()</code> method which will generate a <code>URL</code> that points to the memory location with that binary data. The <code>URL</code> can then be used by elements
like <code>&lt;img&gt;</code> to load the image data.</p> <h3 id="urlsearchparams"><a href="#urlsearchparams" class="header-anchor">#</a> URLSearchParams</h3> <p>When you are building a url to assign to an anchor tag href attribute, or a form action attribute, then you will want to use a <code>URL</code> object. Very often you will start with the url of the current page. The <code>window.location</code> object has an <code>href</code> property which holds the full String value of the current URL. When you make a fetch call, the <code>Response</code> object returned from the server also has a <code>url</code> property with the full string URL for the request.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//you can build custom URL objects with the URL constructor</span>
<span class="token keyword">let</span> url1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'/path/and/filename.html'</span><span class="token punctuation">,</span> <span class="token string">'https://example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//the url1 object will have properties for each part of the URL, including .href</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url1 <span class="token keyword">instanceof</span> <span class="token class-name">URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

<span class="token keyword">let</span> url2 <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
<span class="token comment">//the url2 object will have properties for each part of the URL</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url2 <span class="token keyword">instanceof</span> <span class="token class-name">Location</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

<span class="token keyword">let</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> url3 <span class="token operator">=</span> resp<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
  <span class="token comment">//url3 is a String similar to URL.href or Location.href</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> url3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//string</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>If you get the url string from a Response object, then you will likely want to convert that into an actual URL object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Once you have the URL object then you can get the various properties like <code>host</code>, <code>hostname</code>, <code>port</code>, <code>protocol</code>, <code>pathname</code>, <code>search</code>, <code>searchParams</code>, or <code>href</code>.</p> <p>The <code>search</code> property is a string that contains the value of the queryString. The <code>searchParams</code> property is a <code>URLSearchParams</code> object that contains all of the individual params in the query string as well as their values, in a convenient format.</p> <p>When working with queryStrings, you should use the <code>URLSearchParams</code> objects when reading or editing the values. Note, the window.location object does NOT have a <code>searchParams</code> property.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> params <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">;</span> <span class="token comment">//the actual URLSearchParams object</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true or false if parameter exists</span>
params<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'steve'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//update or create the value of querystring param called name</span>
<span class="token comment">//the set() method will update the params directly inside of the URL object in `url`.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//retrieve the value of the parameter</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>If you want to entirely replace the old params then you can create a new <code>URLSearchParams</code> object, assign the values you want and then update your URL object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//new set of params</span>
<span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'steve'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//update the URL object and overwrite the old querystring</span>
url<span class="token punctuation">.</span>searchParams <span class="token operator">=</span> params<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="files"><a href="#files" class="header-anchor">#</a> Files</h3> <p>File objects represent files from your operating system as well as files that are in a <code>Request</code> or <code>Response</code> object.</p> <p>A user can pass a file to the browser through an <code>&lt;input type=&quot;file&quot; /&gt;</code> element. There is also a new system <code>Origin Private File System</code> (OPFS) designed to allow for access to the device file system. However, it does NOT have full support across all browsers. So, this leaves us with the input element approach.</p> <p>The <code>input</code> element has an <code>accept</code> attribute that allows you to filter the types of files that you are willing to accept. If added, the <code>multiple</code> attribute lets the user select more than one file at a time.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myForm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GET<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>somepage.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatarID<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatarNM<span class="token punctuation">&quot;</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/*, audio/*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">multiple</span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">Key points about Forms</p> <p>If you put any single type of button into a form, clicking it will submit the form.</p> <p>If the user is typing in a text <code>&lt;input&gt;</code> field in a form and they hit the <code>Enter</code> key, it will submit the form.</p> <p>A form being submit means that the browser will send all the form data to the server along with the request for the file indicated in the form <code>action</code> attribute.</p></div> <p>In JavaScript, the <code>&lt;input type=&quot;file&quot;&gt;</code> elements will always have a <code>file</code> property that holds a <code>FileList</code> object. It has this list regardless of how many files the user picks. Just like an array, the list could be empty or have a dozen files.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//this function runs after DOMContentLoaded</span>
  <span class="token keyword">let</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myForm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> handleSubmit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> input<span class="token punctuation">;</span>
  input <span class="token operator">=</span> form<span class="token punctuation">.</span>elements<span class="token punctuation">.</span>avatarNM<span class="token punctuation">;</span>
  input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'avatarID'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> filelist <span class="token operator">=</span> input<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
  <span class="token comment">//filelist is an array of files.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>filelist<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//at least one file submitted</span>
    <span class="token keyword">let</span> fileOne <span class="token operator">=</span> filelist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileOne<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileOne<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileOne<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileOne<span class="token punctuation">.</span>lastModified<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>If you want to build your own <code>File</code> object you can do that with the <code>new File([fileBytes], fileName, options)</code> constructor. Only the fileBytes is a required parameter. It needs to be an Iterable object like an Array, TypedArray, or Blob. The <code>filename</code> is what you want to use as the name of the file and the <code>options</code> is usually the mime-type, like <code>application/json</code> or <code>text/xml</code> or <code>image/jpg</code>.</p> <p>If you want to create a JSON file, you can take a JavaScript object, convert it to a JSON string with <code>JSON.stringify()</code> and then pass that string to the File constructor, wrapped in an Array.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">hello</span><span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'mydata.json'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>A <code>Blob</code> is just a File that has no filename and an optional mime-type. It holds an array of data, just like a <code>File</code> object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">hello</span><span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>When we are working with the Response object from a fetch, if the data is something other than a JSON file then we are probably going to be using the <code>blob()</code> method to extract the Blob from the Response object's body.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'bad fetch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//data is a Blob object</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//handle the error</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>If you have a Blob or a File object that you are going to upload to the server via fetch, then it can be set as the value for the <code>body</code> property of the <code>Request</code> object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">hello</span><span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myjsonfile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'mydata.json'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
    <span class="token comment">//the content-type header indicates the type of file being uploaded</span>
  <span class="token punctuation">}</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> myjsonfile<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div title="Handling Files for Web Apps" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/zq2xD-xuIG4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <div title="Intro to TypedArrays" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/UYkJaW3pmj0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/File" target="_blank" rel="noopener noreferrer">MDN File object reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" target="_blank" rel="noopener noreferrer">MDN Blob object reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="content-security-policy"><a href="#content-security-policy" class="header-anchor">#</a> Content-Security-Policy</h3> <p>The <a href="https://content-security-policy.com" target="_blank" rel="noopener noreferrer">Content Security Policy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a new header that was added as a security feature to help developers protect their website users.</p> <p>The header can be added in the server-side code, or through a <code>&lt;meta http-equiv=&quot;Content-security-policy&quot;&gt;</code> tag. Any meta tag that you add to your HTML with the <code>http-equiv</code> attribute means that it is a Response header that you are adding to the page through the HTML.</p> <p>This policy allows developers to have exact control over where files are allowed to be loaded from as the user navigates the website. For each file type, eg: fonts, images, stylesheets, scripts, fetch call responses, media, etc, the developer can provide a list of the allowed sources for those file type requests.</p> <p>You can <a href="https://mad9014.github.io/f2024/modules/browser-js/week11/security/#csp" target="_blank" rel="noopener noreferrer">read more about CSP in the mad9014 notes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="cors-cross-origin-resource-sharing"><a href="#cors-cross-origin-resource-sharing" class="header-anchor">#</a> CORS - Cross-Origin Resource Sharing</h3> <p><strong>CORS</strong> is the set of rules that browsers follow when they are accessing resources like images or json files which are coming from an origin that is different from the origin for the current HTML file.</p> <p>At its most basic, the browser will look at the origin for a request and if the origin is different than the current one, it knows that it must apply the rules. When the origin is different, then both the browser and the server must be in agreement that the website is allowed to access the resource.</p> <p>The browser will make a preflight request for the resource. This means an HTTP Request using the method <code>OPTIONS</code>. The Request will only have HEADERS, no body. The Response will only have HEADERS, no body. In the headers there must be at least a header called <code>Access-Control-Allow-Origin</code>. The value of this header must be either <code>*</code> the wildcard character or an origin that matches the current website, eg: <code>https://127.0.0.1:5500</code>. Without that header and a match for the origin of the HTML file, the browser will either not allow the request for the resource to proceed or the file will be retrieved but the script will not be allowed to access the content.</p> <p>Say you make a fetch call for an image but you don't get the <code>access-control-allow-origin</code> header match. The image will be downloaded by the browser but you will NOT be able to call <code>response.blob()</code> to get the image data out of the Response object. The HTTP status of the response will be zero instead of 200. When we get a status of zero, this is known as an Opaque response. JavaScript is not allowed to do anything with an Opaque response.</p> <p>However, an image element in the HTML is allowed to load and display an image that was in an opaque response. This is why <code>&lt;img&gt;</code> tags can make requests for images from anywhere.</p> <p>When we start working with Service Workers and managing fetch calls to different servers. We will be able to accept an opaque response and pass it on to the webpage so the <code>&lt;img&gt;</code> tag can load the opaque response image.</p> <p>You can read more about <a href="https://mad9014.github.io/f2024/modules/browser-js/week11/security/#cors" target="_blank" rel="noopener noreferrer">CORS in the mad9014 notes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="todo-this-week"><a href="#todo-this-week" class="header-anchor">#</a> ToDo This Week</h2> <div class="custom-block danger"><p class="custom-block-title">To Do this week</p> <ul><li>read all the content for modules 1.1 and 1.2</li> <li>start reading the Hybrid content and review the 2 Hybrid exercises.</li> <li>The Hybrid Quiz about JavaScript classes must be taken by the end of week 2.</li> <li>Watch the <a href="https://www.youtube.com/watch?v=2sQ9xiEAXNo" target="_blank" rel="noopener noreferrer">YouTube Fetch Video<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as review.</li> <li>Watch the <a href="https://www.youtube.com/watch/?v=zq2xD-xuIG4" target="_blank" rel="noopener noreferrer">YouTube File Video<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as review.</li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/6/2025, 1:03:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/w2025/modules/hybrids/exercises.html" class="prev">
        Hybrid Exercises
      </a></span> <span class="next"><a href="/w2025/modules/pwas/week1/1.2/">
        1.2: Review Topics
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/w2025/assets/js/app.87c858a9.js" defer></script><script src="/w2025/assets/js/2.ccdb61a5.js" defer></script><script src="/w2025/assets/js/32.cfce5625.js" defer></script><script src="/w2025/assets/js/9.01890ce5.js" defer></script><script src="/w2025/assets/js/11.5fe5a40b.js" defer></script>
  </body>
</html>
