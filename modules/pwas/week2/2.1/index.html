<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.1 Single Page Applications | MAD9022</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" type="image/svg" href="/w2025/assets/javascript.svg">
    <link rel="shortcut icon" type="image/svg" href="/w2025/assets/javascript.svg">
    <meta name="description" content="Fullstack: Frontend Development Course">
    
    <link rel="preload" href="/w2025/assets/css/0.styles.33415ee0.css" as="style"><link rel="preload" href="/w2025/assets/js/app.87c858a9.js" as="script"><link rel="preload" href="/w2025/assets/js/2.ccdb61a5.js" as="script"><link rel="preload" href="/w2025/assets/js/34.a3793153.js" as="script"><link rel="preload" href="/w2025/assets/js/9.01890ce5.js" as="script"><link rel="prefetch" href="/w2025/assets/js/10.3e691a48.js"><link rel="prefetch" href="/w2025/assets/js/11.5fe5a40b.js"><link rel="prefetch" href="/w2025/assets/js/12.f49551e7.js"><link rel="prefetch" href="/w2025/assets/js/13.d5974a84.js"><link rel="prefetch" href="/w2025/assets/js/14.32f7e6e8.js"><link rel="prefetch" href="/w2025/assets/js/15.0ae027c8.js"><link rel="prefetch" href="/w2025/assets/js/16.f2386a1e.js"><link rel="prefetch" href="/w2025/assets/js/17.d7b9d534.js"><link rel="prefetch" href="/w2025/assets/js/18.7c15b945.js"><link rel="prefetch" href="/w2025/assets/js/19.51980183.js"><link rel="prefetch" href="/w2025/assets/js/20.d519c082.js"><link rel="prefetch" href="/w2025/assets/js/21.362f6b8c.js"><link rel="prefetch" href="/w2025/assets/js/22.afaf2123.js"><link rel="prefetch" href="/w2025/assets/js/23.cdc2c887.js"><link rel="prefetch" href="/w2025/assets/js/24.9b75b7c6.js"><link rel="prefetch" href="/w2025/assets/js/25.e357a328.js"><link rel="prefetch" href="/w2025/assets/js/26.6e814142.js"><link rel="prefetch" href="/w2025/assets/js/27.106c07bd.js"><link rel="prefetch" href="/w2025/assets/js/28.126c37bf.js"><link rel="prefetch" href="/w2025/assets/js/29.ca946c51.js"><link rel="prefetch" href="/w2025/assets/js/3.05989ff3.js"><link rel="prefetch" href="/w2025/assets/js/30.2ba498f6.js"><link rel="prefetch" href="/w2025/assets/js/31.e41d2241.js"><link rel="prefetch" href="/w2025/assets/js/32.cfce5625.js"><link rel="prefetch" href="/w2025/assets/js/33.3dc1268c.js"><link rel="prefetch" href="/w2025/assets/js/35.ab1290f2.js"><link rel="prefetch" href="/w2025/assets/js/36.3d9064e0.js"><link rel="prefetch" href="/w2025/assets/js/37.2ae4164b.js"><link rel="prefetch" href="/w2025/assets/js/38.195bef2c.js"><link rel="prefetch" href="/w2025/assets/js/39.a9904a96.js"><link rel="prefetch" href="/w2025/assets/js/4.79533d7f.js"><link rel="prefetch" href="/w2025/assets/js/40.1c93503b.js"><link rel="prefetch" href="/w2025/assets/js/41.61991e2b.js"><link rel="prefetch" href="/w2025/assets/js/42.87d5cabf.js"><link rel="prefetch" href="/w2025/assets/js/43.d8a479ef.js"><link rel="prefetch" href="/w2025/assets/js/44.8446907e.js"><link rel="prefetch" href="/w2025/assets/js/45.d1e73d03.js"><link rel="prefetch" href="/w2025/assets/js/46.14dd0c4d.js"><link rel="prefetch" href="/w2025/assets/js/47.6eae941d.js"><link rel="prefetch" href="/w2025/assets/js/48.4b257292.js"><link rel="prefetch" href="/w2025/assets/js/49.7c622f43.js"><link rel="prefetch" href="/w2025/assets/js/5.60adfd1c.js"><link rel="prefetch" href="/w2025/assets/js/50.5cc4788b.js"><link rel="prefetch" href="/w2025/assets/js/51.345ce69e.js"><link rel="prefetch" href="/w2025/assets/js/52.59f792c0.js"><link rel="prefetch" href="/w2025/assets/js/53.9344eea4.js"><link rel="prefetch" href="/w2025/assets/js/6.96402398.js"><link rel="prefetch" href="/w2025/assets/js/7.956989e6.js"><link rel="prefetch" href="/w2025/assets/js/8.62f5a92b.js">
    <link rel="stylesheet" href="/w2025/assets/css/0.styles.33415ee0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2025/" class="home-link router-link-active"><img src="/w2025/mad-d-logo-sm.png" alt="MAD9022" class="logo"> <span class="site-name can-hide">MAD9022</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hybrid</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>PWA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2025/modules/pwas/week1/1.1/" class="sidebar-link">1.1: Course Intro &amp; Review</a></li><li><a href="/w2025/modules/pwas/week1/1.2/" class="sidebar-link">1.2: Review Topics</a></li><li><a href="/w2025/modules/pwas/week2/2.1/" aria-current="page" class="active sidebar-link">2.1: Single Page Applications</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#what-is-a-single-page-application" class="sidebar-link">What is a Single Page Application</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#what-is-state" class="sidebar-link">What is State</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#history-object" class="sidebar-link">History Object</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#pushstate-and-replacestate" class="sidebar-link">pushState and replaceState</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#popstate-event" class="sidebar-link">popstate event</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#hashchange-event" class="sidebar-link">hashchange event</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#building-navigation" class="sidebar-link">Building Navigation</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#styling" class="sidebar-link">Styling</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#view-transition-animations" class="sidebar-link">View Transition animations</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#upcoming-navigation-api" class="sidebar-link">Upcoming Navigation API</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/pwas/week2/2.1/#todo-this-week" class="sidebar-link">ToDo This Week</a></li></ul></li><li><a href="/w2025/modules/pwas/week2/2.2/" class="sidebar-link">2.2: SPA &amp; Coding Practices</a></li><li><a href="/w2025/modules/pwas/week3/3.1/" class="sidebar-link">3.1: Workers &amp; Service Workers</a></li><li><a href="/w2025/modules/pwas/week3/3.2/" class="sidebar-link">3.2: Service Worker Events</a></li><li><a href="/w2025/modules/pwas/week4/4.1/" class="sidebar-link">4.1: Messaging</a></li><li><a href="/w2025/modules/pwas/week4/4.2/" class="sidebar-link">4.2: Intro to PWAs</a></li><li><a href="/w2025/modules/pwas/week5/5.1/" class="sidebar-link">5.1: PWAs Continued</a></li><li><a href="/w2025/modules/pwas/week5/5.2/" class="sidebar-link">5.2: IndexedDB &amp; Data</a></li><li><a href="/w2025/modules/pwas/week6/6.1/" class="sidebar-link">6.1: Hosting Projects</a></li><li><a href="/w2025/modules/pwas/week6/6.2/" class="sidebar-link">6.2: PWA Project</a></li><li><a href="/w2025/modules/pwas/week7/7.1/" class="sidebar-link">7.1: Git Pull Requests</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title red">
    PWA
  </div> <h1>2.1 Single Page Applications</h1> <div class="underdev no">Module Still Under Development</div></header> <h2 id="what-is-a-single-page-application"><a href="#what-is-a-single-page-application" class="header-anchor">#</a> What is a Single Page Application</h2> <p>A Single Page Application is a web application that has a single HTML file. The &quot;pages&quot; in the web app are simply different parts of the page that are shown and hidden. We can use animations in our CSS to control the appearance of the page and make it look like pages are being added or removed from the screen.</p> <p>Since there is only one web page, it means that we are not actually loading new pages. We are only changing the hash portion of the URL. As the user clicks on buttons and links, we change the hash value in the URL. We listen for changes in the URL and use that as the trigger to change which portion of the page is shown. There are a couple of specialized methods that we will use to change the URL - <code>pushState</code> and <code>replaceState</code> which also add the change to the browser history array. There are a couple of specialized events - <code>popstate</code> and <code>hashchange</code> that we can listen for as part of the navigation too.</p> <h2 id="what-is-state"><a href="#what-is-state" class="header-anchor">#</a> What is State</h2> <p>State is a term used to describe the current condition of an app or page. Your own current state could be described as alive, awake, reading, and maybe thirsty. This is a concept that you will see over and over as you build more web applications.</p> <p>The browser has a history array for each tab that it uses to track the history of the user's navigation within the tab. When an entry is added to the history array, the browser will also save data with that entry. The data that it saves will be things like the current values in any forms on the page, and the scroll position.</p> <p>If we use the <code>pushState</code> or <code>replaceState</code> methods we get to add or edit an entry in the history array. We also get to save state data. We actually create an object and put whatever data we want into it. When the <code>popstate</code> event is triggered we can access that <code>state</code> data from the history array entry.</p> <h2 id="history-object"><a href="#history-object" class="header-anchor">#</a> History Object</h2> <p>In the browser, there is core JavaScript and then the Web APIs. The <code>window</code> object is the parent object for practically all the Web APIs. The Service Worker context is another global object. Inside the <code>window</code> object, amoung other objects, we will find <code>document</code>, <code>navigator</code>, <code>location</code>, <code>sessionStorage</code>, <code>localStorage</code>, <code>caches</code>, and <code>history</code>. The <code>history</code> object provides a containing object to manage navigation in the browser.</p> <p>The History API is the collection of properties, methods, and events dealing with the browser's navigational history. The global <code>window.history</code> object is the containing object for all of this. It is an object of type <code>History</code>.</p> <p>Here are the three properties of the <code>history</code> object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>history<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">//number of entries in the history stack for the current tab session</span>
history<span class="token punctuation">.</span>scrollRestoration<span class="token punctuation">;</span> <span class="token comment">// 'auto' or 'manual' do we want the tab to scroll to the previous position when going back</span>
history<span class="token punctuation">.</span>state<span class="token punctuation">;</span> <span class="token comment">// readonly reference to the state object of the top item on the history stack</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The methods on the <code>history</code> object that can be used for navigating to different entries in the history stack:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//go back one step in the stack</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// go forward one step in the stack</span>
history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//move forward or backward in the stack.</span>
<span class="token comment">// negative integer means back, positive integer means forward, zero means reload current page</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The methods for directly adding to the history stack or editing the current entry in the history stack are:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span>stateObject<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//add a new entry at the top of the stack</span>
history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>stateObject<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//replace the top entry on the stack</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/History" target="_blank" rel="noopener noreferrer">MDN history API reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="pushstate-and-replacestate"><a href="#pushstate-and-replacestate" class="header-anchor">#</a> pushState and replaceState</h2> <p>As mentioned above we have these two methods for editing the history stack (the browser history array). Both of the methods take three parameters - a state data object, <code>null</code> because the second parameter is no longer used, and a URL for the location.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span>stateObject<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//add a new entry at the top of the stack</span>
history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>stateObject<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//replace the top entry on the stack</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The difference between the methods are that the <code>pushState</code> method adds the new entry to the top of the history stack, and the <code>replaceState</code> method will replace the current history stack entry.</p> <p>Calling either of these methods changes the history stack AND change what is written in the browser location bar.</p> <p>The new URL does not need to be absolute. If it's relative, it's resolved relative to the current URL. The new URL must be of the same origin as the current URL</p> <div class="custom-block tip"><p class="custom-block-title">Keypoints for pushState and replaceState</p> <p>It is important to keep in mind that these methods are <strong>NOT</strong> navigation methods. They are <strong>NOT</strong> loading a page. They are ONLY changing the history array and what is written in the location bar.</p></div> <p>Now, the <code>pushState</code> and <code>replaceState</code> methods can update the history stack and change what is written in the browser location bar. This means that we can update the hash part OR the page name. It really doesn't matter which part of the URL we change with <code>pushState</code>. The limitations only occur when the user hits refresh or they save a link to be loaded later.</p> <p>Say we are on <code>https://www.example.com/index.html</code> and then we use <code>pushState()</code> to change the displayed URL to <code>https://www.example.com/magic.html</code>. Everything seems fine. But if the user now hits refresh, an actual HTTP GET Request for <code>/magic.html</code> will be sent to the server. The server will respond with a 404 error. Not what we wanted.</p> <p>There are ways on the server to accept any HTML file request and always return <code>/index.html</code>, but we can't do this on the client-side. You will learn about this in MAD9124.</p> <p>If, on the other hand, we use <code>pushState()</code> to update the hash value only, or let the user click on anchor tags that only update the hash value, then our problem is avoided. The hash (fragment identifier) portion of the URL is NEVER sent to the server. It is only a signal to the browser to scroll to a different part of the current page.</p> <p>We are building a SINGLE Page Application after all. Why change the name of the single page that we are loading? Just change the fragment identifier.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/History/pushState" target="_blank" rel="noopener noreferrer">MDN pushState method reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="popstate-event"><a href="#popstate-event" class="header-anchor">#</a> popstate event</h2> <p>The <code>popstate</code> event is dispatched to the window every time the active history entry changes between two history entries for the same document.</p> <p>In other words, when the user hits the back or forward button in the browser, or our script calls <code>history.back()</code>, <code>history.forward()</code>, or <code>history.go()</code>, then the <code>popstate</code> event will be triggered.</p> <p>The <code>popstate</code> event has the <code>window</code> object as it's target. The <code>window</code> has a <code>location</code> object. We can use that to determine what the current URL is.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span> popped<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//on the window object</span>

<span class="token keyword">function</span> <span class="token function">popped</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//popstate event detected</span>
  <span class="token keyword">let</span> href <span class="token operator">=</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
  <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//do what you want with the url object</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>As the user clicks the back and forward button, they are moving between history stack entries. We are seeing the current page still if pushState was used to add the history stack entries. The webpage does not load or unload.</p> <div class="custom-block danger"><p class="custom-block-title">pushState</p> <p>Note that pushState() never causes a <code>popstate</code> event to be fired, even if the new URL differs from the old URL only in its hash.</p></div> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/popstate_event" target="_blank" rel="noopener noreferrer">MDN popstate event reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="hashchange-event"><a href="#hashchange-event" class="header-anchor">#</a> hashchange event</h2> <p>The <code>hashchange</code> event is triggered by an actual navigation caused by the user clicking a link or a <code>location.assign()</code> or <code>location.replace()</code> method call. If the hash (fragment identifier) value in the url changes then the <code>hashchange</code> event is triggered.</p> <p>If we are using <code>ev.preventDefault()</code> on a click event for an anchor then the actual navigation does NOT happen. So... the <code>hashchange</code> event will <strong>not</strong> be triggered.</p> <p>If the anchor tag actually has a new hash value as its href value, then the user can click <code>&lt;a&gt;</code> and it will trigger the <code>hashchange</code> event AND the <code>popstate</code> event.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> hashed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//on the window object</span>

<span class="token keyword">function</span> <span class="token function">hashed</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//hashchange event detected</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>oldURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> url<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
  <span class="token comment">//you can use the hash to do your navigation UI updates</span>
  <span class="token comment">//the URL has already been changed, so you don't need pushState</span>
  <span class="token comment">//the history stack has already been changed</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>The <code>hashchange</code> event has a <code>target</code> property like any object, but it also has a <code>newURL</code> and an <code>oldURL</code> property. These will let you get the hash value to be used when updating your UI.</p> <p>If you click an anchor tag that has a filename plus a new hash value, then an actual navigation will take place. An <code>unload</code> event and a <code>load</code> event will occur. We will not get to use a <code>popstate</code> or <code>hashchange</code> event listener because the current page unloads.</p> <div class="custom-block danger"><p class="custom-block-title">pushState</p> <p>Note that pushState() never causes a <code>hashchange</code> event to be fired, even if the new URL differs from the old URL only in its hash.</p></div> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/hashchange_event" target="_blank" rel="noopener noreferrer">MDN hashchange event reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="building-navigation"><a href="#building-navigation" class="header-anchor">#</a> Building Navigation</h2> <p>Let's take this HTML as our simplified page example.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#One<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page One<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#Two<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page Two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageOne<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is &quot;page&quot; ONE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTwo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is &quot;page&quot; TWO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>In our script we will want to control the className on the <code>&lt;body&gt;</code> element. If the className on the body matches the id on the <code>&lt;div class=&quot;page&quot;&gt;</code> then that will be the &quot;page&quot; that we want to show. If the <code>&lt;body&gt;</code> is missing a class name then we need to have a default value too.</p> <p>When the page loads, we want to check the URL and look for the hash value. It needs to match the id of one of the divs or we will use a default value that will match one of them.</p> <p>Our page needs listeners for the <code>hashchange</code> and the <code>DOMContentLoaded</code> events. The init function will handle checking the hash value in the URL and then call a function called <code>setPage</code> to update the UI.</p> <p>The <code>hashchange</code> listener gets triggered when the user clicks on the anchor tags in the nav bar. It will also read the new URL and then call the <code>setPage</code> function to update the UI.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> hashed<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> page <span class="token operator">=</span> location<span class="token punctuation">.</span>hash <span class="token operator">?</span> location<span class="token punctuation">.</span>hash <span class="token operator">:</span> <span class="token string">'#One'</span><span class="token punctuation">;</span> <span class="token comment">//use #One if no hash value</span>
  page <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'#One'</span><span class="token punctuation">,</span> <span class="token string">'#Two'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">?</span> page <span class="token operator">:</span> <span class="token string">'#One'</span><span class="token punctuation">;</span>
  <span class="token comment">//REMEMBER THAT these hash values are CASE-SENSITIVE</span>
  <span class="token comment">//make sure that the hash value was #One or #Two</span>
  <span class="token comment">//call the function to update the UI</span>
  <span class="token function">setPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">hashed</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> url<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
  <span class="token function">setPage</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>The <code>setPage</code> function will add a class, that we are calling <code>inactive</code> to ALL the pages. Having this class is going to trigger CSS transitions to make all the pages leave the screen. Once those have been added, we want to look at the value being passed to the function. The value will be <code>#One</code> or <code>#Two</code>. Depending on which of those it is, we add the appropriate className to the <code>&lt;body&gt;</code> and remove the <code>inactive</code> class from the current page.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">setPage</span><span class="token punctuation">(</span><span class="token parameter">hash</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.page'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> page<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'inactive'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//set ALL the pages as inactive so all but the selected one will be removed from the screen</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>hash<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'#One'</span><span class="token operator">:</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'pageOne'</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#pageOne'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'page'</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'#Two'</span><span class="token operator">:</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'pageTwo'</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#pageTwo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'page'</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'pageOne'</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#pageOne'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'page'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>It might seem like we are adding and removing the <code>inactive</code> class from one page and triggering two competing transitions but this will not happen. If we look at how the event loop works, the whole <code>setPage</code> function has been added to the stack. The whole stack runs before the event loop moves forward to the UI painting update part of the loop.</p> <p>If we run the following code:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'khaki'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'gold'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'rebeccapurple'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'limegreen'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The JavaScript interpreter will find the element with the id <code>myDiv</code>, get a reference to the backgroundColor property, and then step through all the assignments for the property. It will NOT actually apply the new value as the backgroundColor until after <code>limegreen</code> has been set. All of those commands will happen in a single event loop cycle.</p> <h2 id="styling"><a href="#styling" class="header-anchor">#</a> Styling</h2> <p>When showing and hiding different parts of our webpages, we NEVER want to use individual style properties like the following.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//This is a BAD PRACTICE</span>
<span class="token comment">//hide one part of the page</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#pageOne'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
<span class="token comment">//show another part</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#pageTwo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
<span class="token comment">//DO NOT DO THIS</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>If you use the above approach you are changing one property within the style attribute of two different HTML elements. No possibilities for transitions or animations. No proper CSS cascading because you are changing style properties at the highest level of specificity.</p> <p>Inside the main element we will have all the content that we want to show and hide as the user navigates. The styling for the nav anchors can also change to match the current hash value. As the user navigates we can set a CSS classname on the body element indicating which &quot;page&quot; we want to show.</p> <p>In our CSS file we just define styles for the various combinations</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">main,
.pageOne main</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>

  <span class="token comment">/* default case */</span>
  <span class="token selector">#pageOne</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">#pageTwo</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.pageTwo main</span> <span class="token punctuation">{</span>
  <span class="token selector">#pageOne</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">#pageTwo</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.page</span> <span class="token punctuation">{</span>
  <span class="token comment">/* styles that all pages have in common */</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> 100dvh<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 4rem<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token comment">/* combine with relative to place the pages */</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 2rem<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #333<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #e4e4e4<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.4s linear<span class="token punctuation">,</span> opacity 0.8s linear<span class="token punctuation">;</span>
  <span class="token comment">/* applies to both leaving and arriving */</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.page.inactive</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>200%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>Now the CSS is responsible for all the changes in appearance on our website when navigation occurs. The only thing we do in our script is change the CSS className on the <code>&lt;body&gt;</code> element.</p> <p>If you want, you can use CSS transitions to animate the &quot;pages&quot; leaving and appearing on the screen. Add the <code>transition</code> property to the <code>.page</code> class. Then we want to limit the body so it can clip anything that we animate off the screen to the left or right. This prevents horizontal scrolling when we animate pages off the screen. All the pages use <code>position: absolute;</code> so we can stack them as layers below the navbar.</p> <p>The styles for the anchor tags will be something like this:</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">nav</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 2rem<span class="token punctuation">;</span>
  <span class="token selector">a</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.pageOne nav a[href='#One']</span> <span class="token punctuation">{</span>
  <span class="token property">text-decoration-line</span><span class="token punctuation">:</span> overline underline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.pageTwo nav a[href='#Two']</span> <span class="token punctuation">{</span>
  <span class="token property">text-decoration-line</span><span class="token punctuation">:</span> overline underline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Then we need a class that we can add to any page element to trigger animations. The default appearance is created by the <code>.page</code> class. Adding the <code>.inactive</code> class will transition the page off the screen. Removing it will make it animate back onto the screen.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.page.inactive</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>200%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Here is a working demo of all the above parts for navigating within a SPA.</p> <p><a href="https://github.com/prof3ssorSt3v3/urban-spoon" target="_blank" rel="noopener noreferrer">Github Repo SPA Navigation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="view-transition-animations"><a href="#view-transition-animations" class="header-anchor">#</a> View Transition animations</h2> <p>Recently a new View Transition API was added across all the browsers. If you want to create more complex animations you can now add this to your sites. Read here for more - <a href="https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="upcoming-navigation-api"><a href="#upcoming-navigation-api" class="header-anchor">#</a> Upcoming Navigation API</h2> <p>There is a new Navigation API intended to be used as a replacement for what we do with the History API. It is still not supported in Firefox or Safari. That means we can't use it on any iPhone, or on desktop/laptop computers using Firefox or Safari.</p> <p>You can read the details <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation" target="_blank" rel="noopener noreferrer">about the Navigation API on MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="todo-this-week"><a href="#todo-this-week" class="header-anchor">#</a> ToDo This Week</h2> <div class="custom-block danger"><p class="custom-block-title">To Do this week</p> <ul><li>read all the content for modules 2.1 and 2.2</li> <li>Complete and submit <a href="/w2025/modules/hybrids/exercises.html">Hybrid exercise 1 - JS Class Quiz</a>.</li></ul></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/w2025/modules/pwas/week1/1.2/" class="prev">
        1.2: Review Topics
      </a></span> <span class="next"><a href="/w2025/modules/pwas/week2/2.2/">
        2.2: SPA &amp; Coding Practices
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/w2025/assets/js/app.87c858a9.js" defer></script><script src="/w2025/assets/js/2.ccdb61a5.js" defer></script><script src="/w2025/assets/js/34.a3793153.js" defer></script><script src="/w2025/assets/js/9.01890ce5.js" defer></script>
  </body>
</html>
