<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web Component Styles and Functionality | MAD9022</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" type="image/svg" href="/w2025/assets/javascript.svg">
    <link rel="shortcut icon" type="image/svg" href="/w2025/assets/javascript.svg">
    <meta name="description" content="Fullstack: Frontend Development Course">
    
    <link rel="preload" href="/w2025/assets/css/0.styles.33415ee0.css" as="style"><link rel="preload" href="/w2025/assets/js/app.87c858a9.js" as="script"><link rel="preload" href="/w2025/assets/js/2.ccdb61a5.js" as="script"><link rel="preload" href="/w2025/assets/js/30.2ba498f6.js" as="script"><link rel="preload" href="/w2025/assets/js/9.01890ce5.js" as="script"><link rel="preload" href="/w2025/assets/js/11.5fe5a40b.js" as="script"><link rel="prefetch" href="/w2025/assets/js/10.3e691a48.js"><link rel="prefetch" href="/w2025/assets/js/12.f49551e7.js"><link rel="prefetch" href="/w2025/assets/js/13.d5974a84.js"><link rel="prefetch" href="/w2025/assets/js/14.32f7e6e8.js"><link rel="prefetch" href="/w2025/assets/js/15.0ae027c8.js"><link rel="prefetch" href="/w2025/assets/js/16.f2386a1e.js"><link rel="prefetch" href="/w2025/assets/js/17.d7b9d534.js"><link rel="prefetch" href="/w2025/assets/js/18.7c15b945.js"><link rel="prefetch" href="/w2025/assets/js/19.51980183.js"><link rel="prefetch" href="/w2025/assets/js/20.d519c082.js"><link rel="prefetch" href="/w2025/assets/js/21.362f6b8c.js"><link rel="prefetch" href="/w2025/assets/js/22.afaf2123.js"><link rel="prefetch" href="/w2025/assets/js/23.cdc2c887.js"><link rel="prefetch" href="/w2025/assets/js/24.9b75b7c6.js"><link rel="prefetch" href="/w2025/assets/js/25.e357a328.js"><link rel="prefetch" href="/w2025/assets/js/26.6e814142.js"><link rel="prefetch" href="/w2025/assets/js/27.106c07bd.js"><link rel="prefetch" href="/w2025/assets/js/28.126c37bf.js"><link rel="prefetch" href="/w2025/assets/js/29.ca946c51.js"><link rel="prefetch" href="/w2025/assets/js/3.05989ff3.js"><link rel="prefetch" href="/w2025/assets/js/31.e41d2241.js"><link rel="prefetch" href="/w2025/assets/js/32.cfce5625.js"><link rel="prefetch" href="/w2025/assets/js/33.3dc1268c.js"><link rel="prefetch" href="/w2025/assets/js/34.a3793153.js"><link rel="prefetch" href="/w2025/assets/js/35.ab1290f2.js"><link rel="prefetch" href="/w2025/assets/js/36.3d9064e0.js"><link rel="prefetch" href="/w2025/assets/js/37.2ae4164b.js"><link rel="prefetch" href="/w2025/assets/js/38.195bef2c.js"><link rel="prefetch" href="/w2025/assets/js/39.a9904a96.js"><link rel="prefetch" href="/w2025/assets/js/4.79533d7f.js"><link rel="prefetch" href="/w2025/assets/js/40.1c93503b.js"><link rel="prefetch" href="/w2025/assets/js/41.61991e2b.js"><link rel="prefetch" href="/w2025/assets/js/42.87d5cabf.js"><link rel="prefetch" href="/w2025/assets/js/43.d8a479ef.js"><link rel="prefetch" href="/w2025/assets/js/44.8446907e.js"><link rel="prefetch" href="/w2025/assets/js/45.d1e73d03.js"><link rel="prefetch" href="/w2025/assets/js/46.14dd0c4d.js"><link rel="prefetch" href="/w2025/assets/js/47.6eae941d.js"><link rel="prefetch" href="/w2025/assets/js/48.4b257292.js"><link rel="prefetch" href="/w2025/assets/js/49.7c622f43.js"><link rel="prefetch" href="/w2025/assets/js/5.60adfd1c.js"><link rel="prefetch" href="/w2025/assets/js/50.5cc4788b.js"><link rel="prefetch" href="/w2025/assets/js/51.345ce69e.js"><link rel="prefetch" href="/w2025/assets/js/52.59f792c0.js"><link rel="prefetch" href="/w2025/assets/js/53.9344eea4.js"><link rel="prefetch" href="/w2025/assets/js/6.96402398.js"><link rel="prefetch" href="/w2025/assets/js/7.956989e6.js"><link rel="prefetch" href="/w2025/assets/js/8.62f5a92b.js">
    <link rel="stylesheet" href="/w2025/assets/css/0.styles.33415ee0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2025/" class="home-link router-link-active"><img src="/w2025/mad-d-logo-sm.png" alt="MAD9022" class="logo"> <span class="site-name can-hide">MAD9022</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Hybrid</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2025/modules/hybrids/" aria-current="page" class="sidebar-link">Web Component Intro</a></li><li><a href="/w2025/modules/hybrids/js-classes.html" class="sidebar-link">JS Prototypes, Classes, and Modules</a></li><li><a href="/w2025/modules/hybrids/sub-classing.html" class="sidebar-link">Extending JS Classes</a></li><li><a href="/w2025/modules/hybrids/styling-behaviour.html" aria-current="page" class="active sidebar-link">Web Component Styling and Behaviour</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#css-host-host-context" class="sidebar-link">CSS :host &amp; :host-context()</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#slotted" class="sidebar-link">::slotted()</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#part" class="sidebar-link">::part()</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#shadow-dom" class="sidebar-link">Shadow DOM</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#css-host" class="sidebar-link">CSS :host</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#html-templates" class="sidebar-link">HTML Templates</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#html-slots" class="sidebar-link">HTML Slots</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#web-component-functionality" class="sidebar-link">Web Component Functionality</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#built-in-methods" class="sidebar-link">Built-in Methods</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#properties-versus-attributes" class="sidebar-link">Properties versus Attributes</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#constructor-function-and-slotchange-event" class="sidebar-link">constructor function and slotchange event</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#assignedelements-and-assignednodes" class="sidebar-link">AssignedElements and AssignedNodes</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#observedattributes" class="sidebar-link">observedAttributes</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#connectedcallback-and-disconnectedcallback-methods" class="sidebar-link">connectedCallback and disconnectedCallback methods</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#attributechangedcallback-method" class="sidebar-link">attributeChangedCallback method</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#events-in-components" class="sidebar-link">Events in Components</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#passing-functions-to-components" class="sidebar-link">Passing Functions to Components</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#additional-component-behaviours" class="sidebar-link">Additional Component Behaviours</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#creating-components-via-javascript" class="sidebar-link">Creating Components via JavaScript</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#free-ebook-reference-for-web-components" class="sidebar-link">Free eBook reference for Web Components</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrids/styling-behaviour.html#using-icons-in-components" class="sidebar-link">Using Icons in Components</a></li></ul></li><li><a href="/w2025/modules/hybrids/libraries.html" class="sidebar-link">Web Component Libraries</a></li><li><a href="/w2025/modules/hybrids/exercises.html" class="sidebar-link">Hybrid Exercises</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title green">
    Hybrid
  </div> <h1>Web Component Styles and Functionality</h1> <div class="underdev">Module Still Under Development</div></header> <h1 id="web-component-styling"><a href="#web-component-styling" class="header-anchor">#</a> Web Component Styling</h1> <p>When creating a web component, we start with a <code>template</code> object plus a <code>class</code> which <code>extends HTMLElement</code>. Inside the <code>template</code> we can write any HTML, which includes a <code>&lt;style&gt;</code> element.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
&lt;style&gt;
:host {
  background-color: #222;
  color: #fff;
  font-size: 20px;
}
p {
  font-size: 2rem;
  font-weight: 100;
}
&lt;/style&gt;
&lt;div&gt;
  &lt;p&gt;Cool Component&lt;/p&gt;
&lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Inside that <code>&lt;style&gt;</code> we can define all the CSS styles that we want to use in the web component.</p> <p>Any CSS that you would write inside a CSS file loaded into a webpage, you can put inside this <code>style</code> element.</p> <h2 id="css-host-host-context"><a href="#css-host-host-context" class="header-anchor">#</a> CSS :host &amp; :host-context()</h2> <p>The <code>:host</code> style allows you to set styles that apply directly to the <code>shadowRoot</code> and therefore your whole component.</p> <p>The <code>:host-context()</code> method accepts a querySelector-like CSS selector so you can target elements inside your component's shadowRoot and style them.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:host-context(p span)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* style spans that are inside of paragraphs in the component */</span>
<span class="token punctuation">}</span>
<span class="token selector">:host-context(.side a)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* style anchors that are inside of any element with the class 'side' in the component */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The pseudo-class method provides a higher level of specificity and could help isolating styles in situations where there is a web component nested inside another web component.</p> <h2 id="slotted"><a href="#slotted" class="header-anchor">#</a> ::slotted()</h2> <p>There is a pseudo-element that can be used inside your web component to target whatever HTML has been injected into your web component to replace the <code>&lt;slot&gt;</code> elements.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">::slotted(p)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* any paragraph that replaced a &lt;slot&gt; */</span>
<span class="token punctuation">}</span>
<span class="token selector">::slotted(h2)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* any h2 that replaced a &lt;slot&gt; */</span>
<span class="token punctuation">}</span>
<span class="token selector">div.footer ::slotted(p)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* any &lt;p&gt; that replaced a &lt;slot&gt; if the &lt;slot&gt; was inside &lt;div class=&quot;footer&quot;&gt; */</span>
<span class="token punctuation">}</span>
<span class="token selector">#fred::slotted(*)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* any element placed into the &lt;slot id=&quot;fred&quot;&gt; */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>The <code>::slotted</code> pseudo-element gives us a way to style any content given to the component from the webpage.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::slotted" target="_blank" rel="noopener noreferrer">MDN reference for ::slotted()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="part"><a href="#part" class="header-anchor">#</a> ::part()</h2> <p>The <code>::part()</code> pseudo-element is like the opposite of the <code>::slotted()</code> one. It provides a way for the developer who is creating the web page to style parts from the web component from outside the shadowRoot.</p> <p>Inside the web component template we just add <code>part</code> attributes to any element that we want to allow to be styled.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">part</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subhead<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>The first paragraph in the template<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">part</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>The second paragraph in the template<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">part</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Another paragraph in the template<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The two paragraphs above, with the <code>part</code> attributes, can be targeted from the CSS in the web page's CSS file.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">cool-component::part(h2)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* styling the h2 inside the template */</span>
<span class="token punctuation">}</span>
<span class="token selector">cool-component::part(p)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* styling all the p elements inside the template */</span>
<span class="token punctuation">}</span>
<span class="token selector">cool-component::part(p):hover</span> <span class="token punctuation">{</span>
  <span class="token comment">/* styling any p element inside the template when it gets hovered over */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::part" target="_blank" rel="noopener noreferrer">MDN reference for ::part()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div title="Styling Web Components" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/kHCpmBXZJ1g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="shadow-dom"><a href="#shadow-dom" class="header-anchor">#</a> Shadow DOM</h2> <p>Each web component will have it's own internal structure that is isolated from the CSS Cascade and JS of the page that is loading them. This internal structure is known as a <code>shadow DOM</code>.</p> <p>The purpose of the <code>shadow DOM</code> is to allow the web component to define its own styling and control the changes in its own element structure without having to worry about the loading web page doing anything that will impact it.</p> <p>When you create a web component, it needs to have a shadowDOM defined with a mode property set to <code>open</code> or <code>closed</code>. The difference being that if you set it to <code>open</code> then the loading web page can get read-only values from the contents inside the web component.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">CoolComponent</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> shadowRoot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'closed'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Inside the constructor method we need to call <code>this.attachShadow()</code>. This method creates the container for the shadowDOM for the element (the <code>ShadowRoot</code>). You can think of it as a protected sandbox for the element to work within. Just like how an iFrame can render another webpage inside a protected space for the current page. The method will return a reference to the <code>shadowRoot</code> that it creates.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow" target="_blank" rel="noopener noreferrer">attachShadow method reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="css-host"><a href="#css-host" class="header-anchor">#</a> CSS :host</h2> <p>Inside your element, when you define the internal CSS that the element will use, the CSS selector <code>:host</code> refers to the <code>shadowRoot</code> which contains your web component.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:host</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You can think of the <code>:host</code> selector for your component, as analogous to the <code>html</code> selector for your webpage.</p> <h2 id="html-templates"><a href="#html-templates" class="header-anchor">#</a> HTML Templates</h2> <p>HTML templates can be, and are, used without web components. They simply provide a template for HTML content that you want to use within your JavaScript.</p> <p>A template can be created inside your HTML file. By default they will not appear on the page.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mytemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Look at Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>I am a really cool template<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Or we can create them in JavaScript.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;
    &lt;h1&gt;Look at Me&lt;/h1&gt;
    &lt;h2&gt;I am a really cool template&lt;/h2&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Once you have a template you can use the <code>content</code> property to extract everything that is inside the <code>&lt;template&gt;</code> element.</p> <p>Once you have the content, you need to generate a copy of it which can be used elsewhere on the webpage or in your web component.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> clone <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//the true value being passed in means copy everything regardless of how many levels deep.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In our web component, the variable <code>clone</code> will hold the cloned copy of the template contents. This is what will be our web component. We append this cloned copy to the shadowRoot that we created.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> clone <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Learn more about HTML5 Templates in these videos:</p> <div title="Using HTML5 Templates" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/mfN-EOkj13Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <div title="HTML5 Templates and cloneNode()" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/zjYgz50E0mA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="html-slots"><a href="#html-slots" class="header-anchor">#</a> HTML Slots</h2> <p>Sometimes you will want to pass information from the parent page down into the component. This could be some text content, this could be theming information, or even a function that you want the component to be able to call after an event.</p> <p>Whatever the reason or the information, the way we can pass it into the component is with the use of <code>&lt;slot&gt;</code> elements.</p> <p>In your webpage, where you add the new web component tag, you can add HTML content as children of the web component tag. These new HTML elements can have <code>slot</code> attributes. Each <code>slot</code> attribute holds a name for a matching <code>&lt;slot&gt;</code> element that is inside your component's template.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Page using the Cool Component<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cool-component</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sam<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Things to be passed to the web component template.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>And even more stuff for the template.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cool-component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Given the above web component tag and child elements with slot names, and the following template.</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">let</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;cool&quot;&gt;
    &lt;h1&gt;&lt;slot name=&quot;sam&quot;&gt;Default h1 content&lt;/slot&gt;&lt;/h1&gt;
    &lt;h2&gt;&lt;slot name=&quot;dean&quot;&gt;Default h2 content&lt;slot&gt;&lt;/h2&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The text inside the <code>&lt;slot&gt;s</code> in the template will only appear if elements with matching slot names are not in the web page.</p> <p>This example would be building content <strong>inside the shadowRoot</strong> like this:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cool<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Things to be passed to the web component template.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>And even more stuff for the template.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The slots have been replaced with the content that was inside the divs with the slot-matching names.</p> <div title="Styling Web Components" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/kHCpmBXZJ1g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="web-component-functionality"><a href="#web-component-functionality" class="header-anchor">#</a> Web Component Functionality</h2> <h2 id="built-in-methods"><a href="#built-in-methods" class="header-anchor">#</a> Built-in Methods</h2> <p>Inside your web component class, there are a number of built-in methods that you should typically use.</p> <ul><li><code>constructor()</code></li> <li><code>observedAttributes()</code></li> <li><code>connectedCallback()</code></li> <li><code>disconnectedCallback()</code></li> <li><code>attributeChangedCallback()</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  &lt;style&gt;&lt;/style&gt;
  &lt;div class=&quot;cool&quot;&gt;
    &lt;slot name=&quot;x&quot;&gt;&lt;/slot&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CoolComponent</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  someProp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">//inside the class you would write this.someProp</span>
  <span class="token keyword">static</span> otherProp <span class="token operator">=</span> <span class="token number">345</span><span class="token punctuation">;</span> <span class="token comment">//inside or outside the class write CoolComponent.otherProp</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> shadowRoot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'closed'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> clone <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div.cool'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> slot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    slot<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'slotchange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//called anytime content is added or altered</span>
      <span class="token comment">//inside this slot</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//list of supported attributes in &lt;cool-component&gt;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//keeps property `a` in-sync with attribute &lt;cool-component a=&quot;&quot;&gt;</span>
    <span class="token comment">//retrieves the value from the attribute when property value is read</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//keeps property `a` in-sync with attribute &lt;cool-component a=&quot;&quot;&gt;</span>
    <span class="token comment">//updates the value in the attribute if property value changes</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//method is run when the web component is added to the web page</span>
  <span class="token punctuation">}</span>
  <span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//method is run when the web component is removed from the web page</span>
  <span class="token punctuation">}</span>
  <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">attributeName<span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//method is run when</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'cool-component'</span><span class="token punctuation">,</span> CoolComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>You can use the above script as a template for creating your own web components.</p> <h2 id="properties-versus-attributes"><a href="#properties-versus-attributes" class="header-anchor">#</a> Properties versus Attributes</h2> <p>When you create an HTMLElement it has attributes and it also has properties. Most of the time the property and the attribute name are the same. But not always. An example of this is the <code>class</code> attribute. In your HTML you would write <code>&lt;p class=&quot;big&quot;&gt;</code>. To get the value inside of the <code>class</code> attribute in JavaScript you need to use the <code>className</code> property. In JavaScript, there is also a property called <code>classList</code> which handles multiple values inside of <code>className</code> as if they were separate values instead of a single string.</p> <p>We could use <code>p.getAttribute('class')</code> or <code>p.className</code>. The first is looking at the attribute in the HTML. The second is a property on the HTMLElement Object in JavaScript.</p> <p>If you want to be able to keep a named property value and the attribute value in sync with each other, then we will add a pair of methods - a getter and a setter - for each property.</p> <p>Using a <code>theme</code> attribute as an example.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'theme'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">get</span> <span class="token function">theme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'theme'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">set</span> <span class="token function">theme</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'theme'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Inside the <code>get</code> and <code>set</code> functions you would have the chance to validate or format the value as it is being pulled from or put into the attribute.</p> <p>All attribute values are strings, regardless of whether it is a number, a boolean or a date value. So, if we wanted the property to hold the numeric version of the string in the attribute then we could do that conversion inside the <code>get</code> method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//use the unary plus operator to convert the string value in age=&quot;&quot;</span>
  <span class="token comment">//to a number if someone asks for the value of the .age property</span>
  <span class="token keyword">return</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">Key Point</p> <p>HTML <strong>attributes</strong> are separate from JavaScript <strong>properties</strong>.</p> <p>When writing HTML, you are adding <strong>attribute</strong> to the elements.</p> <p>In Javascript, when you get a reference to an element, using <code>querySelector()</code> or <code>getElementById()</code> you can use <code>getAttribute()</code> to get the value of the <strong>attribute</strong> in the HTML.</p> <p>Some attributes also have a <strong>property</strong> which will be kept in sync with the <strong>attribute</strong> by the DOM.</p> <p>In Web Components, you are responsible for creating the properties and keeping them in sync with the attributes.</p></div> <div title="HTML Attributes versus JavaScript Properties" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/8QLXD-8wbrc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="constructor-function-and-slotchange-event"><a href="#constructor-function-and-slotchange-event" class="header-anchor">#</a> constructor function and slotchange event</h2> <p>The constructor function runs when the class is creating your component. It creates the shadowRoot where everything is loaded. It copies the template and applies the styles. It gives you the opportunity to create properties that are referencing different parts of the component. Eg: <code>this.element = shadowRoot.querySelector('div.cool')</code>.</p> <p>It also gives you the opportunity to add event listeners for changes to the contents of any slot from your template. there is a <code>slotchange</code> event which will be triggered any time the contents of a slot-connected element inside your web component is changed in the web page.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cool-component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Stuff in slot A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Stuff in slot B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Stuff in slot C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cool-component</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>If the code above is what you put in your HTML, and your web component template has the below code:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  &lt;div class=&quot;cool&quot;&gt;
    &lt;h1&gt;&lt;slot name=&quot;a&quot;&gt;&lt;/slot&gt;&lt;/h1&gt;
    &lt;h2&gt;&lt;slot name=&quot;b&quot;&gt;&lt;/slot&gt;&lt;/h2&gt;
    &lt;p&gt;&lt;slot name=&quot;c&quot;&gt;&lt;/slot&gt;&lt;/p&gt;
  &lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Then we could add a <code>slotchange</code> listener to each slot.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> shadowRoot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'closed'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> clone <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div.cool'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> slots <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> slotA <span class="token operator">=</span> slots<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> slotB <span class="token operator">=</span> slots<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> slotC <span class="token operator">=</span> slots<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  slotA<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'slotchange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>someFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
  slotB<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'slotchange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>someFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
  slotC<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'slotchange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>someFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">someFunc</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//this function will be called whenever the contents of any of the</span>
  <span class="token comment">//HTML slots get changed.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="assignedelements-and-assignednodes"><a href="#assignedelements-and-assignednodes" class="header-anchor">#</a> AssignedElements and AssignedNodes</h2> <p>When you want to access the content that is passed into a slot, we can do that using two methods - <code>assignedElements()</code> and <code>assignedNodes()</code>. These methods are available on the <code>&lt;slot&gt;</code> elements inside your template.</p> <p>Start with a slot in your template, in your web component.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  &lt;div&gt;
    &lt;slot name=&quot;fred&quot;&gt;&lt;/slot&gt;
  &lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>In the web page that holds your component, the web developer can connect to your <code>&lt;slot&gt;</code> and pass in content by adding a <code>slot</code> attribute that matches the name in your template.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-component</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fred<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Some content for the component<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>With the matching name it means that the <code>&lt;h2&gt;</code> element will be inserted into the actual web component content and replace the <code>&lt;slot&gt;</code> with the matching name.</p> <p>In your web component script, in the <code>constructor()</code> function or in the <code>connectedCallback()</code> you can use JavaScript to get a reference to the <code>&lt;slot&gt;</code> element.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> slot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
slot<span class="token punctuation">.</span><span class="token function">assignedElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
slot<span class="token punctuation">.</span><span class="token function">assignedNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>assignedElements()</code> method will return an array of all the top level elements that are being passed into the slot. In our case, it is just the <code>&lt;h2&gt;</code> element.</p> <p>The <code>assignedNodes()</code> method will return an array of elements and textnodes.</p> <p>Once you have references to the content that was pushed into the <code>&lt;slot&gt;</code> in your component you can treat it like any other HTML and do what you want with it.</p> <h2 id="observedattributes"><a href="#observedattributes" class="header-anchor">#</a> observedAttributes</h2> <p>The observedAttributes method, inside the component class, needs to return an Array. The array contains a list of attribute names that you want your component to support. These are attributes that are specific to your component and that are beyond the global ones supported by any element (like <code>id</code> or <code>title</code>).</p> <p>As an example, if your component were going to use an attribute <code>theme</code> and another called <code>type</code>, then the method would look like:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'theme'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This method is a <code>static</code> method. It belongs to the class, not the instance. Remember to add the keyword <code>static</code> in front of <code>get</code>.</p> <h2 id="connectedcallback-and-disconnectedcallback-methods"><a href="#connectedcallback-and-disconnectedcallback-methods" class="header-anchor">#</a> connectedCallback and disconnectedCallback methods</h2> <p>These two methods will run when your component is added to the DOM or removed from the DOM. If the element was part of the HTML when the page is loaded then the <code>connectedCallback</code> method would be called as the HTML is parsed.</p> <p>The most obvious question you would ask is why would you want to put code inside of the <code>connectedCallback</code> method.</p> <p>Since these web components are dynamic and can include any functionality that we want, that means that the content could be dynamically generated or be coming from the Cache, LocalStorage, or even an API.</p> <p>The <code>constructor</code> function creates the initial shadowRoot and all the HTML tags that replace the one written in the web page. It does the structure and styling.</p> <p>The <code>connectedCallback</code> lets you add content, modify content, or add event listeners.</p> <p>If there is any clean up required, like removing event listeners or saving current state, when the element is removed from the page, then that can be done in the <code>disconnectedCallback</code> method.</p> <h2 id="attributechangedcallback-method"><a href="#attributechangedcallback-method" class="header-anchor">#</a> attributeChangedCallback method</h2> <p>Any time the value of an attribute is changed in the HTML, for example <code>&lt;cool-component theme=&quot;big&quot;&gt;</code> becomes <code>&lt;cool-component theme=&quot;little&quot;&gt;</code>, or when the value is first set during the <code>connectedCallback</code>, then <code>attributeChangedCallback</code> gets called.</p> <p>This method will be passed three things - the name of the attribute, the old value of the attribute and the new value of the attribute - in that order.</p> <p>Typically, you would use a <code>switch</code> statement to look at the <code>name</code> of the attribute and then have specific code based on which attribute value was changed or initially set.</p> <div title="Properties and Attributes in Web Components" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/391M3aY9AR4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <div title="Events and Behaviours in Web Components" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y3EH4tCS6ig" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="events-in-components"><a href="#events-in-components" class="header-anchor">#</a> Events in Components</h2> <p>If you wish to add event listeners to any part of your web component then you should do this inside of your <code>connectedCallback</code> function. This is the point where the element has been added to the DOM.</p> <p>In the <code>disconnectedCallback</code> function you should use the <code>removeEventListener</code> method to dispose of the listeners and free the memory used in maintaining them.</p> <p>Using this HTML as the example content of a web component.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Message<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnYes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Approve<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnNo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Reject<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Then inside the <code>connectedCallback</code> function we would add our listener functions.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Agreement</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> shadowRoot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'closed'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> clone <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div.dialog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btnYes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button.btnYes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btnNo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button.btnNo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btnYes<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ev.target is the button</span>
      <span class="token comment">// avoid using `this` inside here</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Yes button clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btnNo<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ev.target is the button</span>
      <span class="token comment">// avoid using `this` inside here</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'No button clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>When you are building a component, you are trying to create something that can stand alone. It can be imported into any website. Any website will only need to import the one JS file and it will have all the built in functionality.</p> <p>Let's say that you have a button element inside your component. Inside your class you can create a method that will be called when a user clicks the button.</p> <p>This method is typically a private method. By making it private it cannot be called directly outside of the class.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;
    &lt;h1&gt;A Title&lt;/h1&gt;
    &lt;button&gt;Click Me&lt;/button&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CoolComponent</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> clone <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btn <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">#handleClick</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the button inside the component was clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>The developer who uses the component will be able to add event listeners to the outer container. If the component creates an element called <code>&lt;my-component&gt;</code>, then the website developer could add an event like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> mc <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//ev.target will be a reference to the &lt;my-component&gt; element</span>
  <span class="token comment">//any time that a user clicks anywhere in the &lt;my-component&gt; this function can run.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The developer who imports the component adds event listeners to the outer container. Events inside the component are able to <code>bubble</code> up and out of the component. So, in the parent script, which belongs to the website, you can listen for these bubbling events.</p> <p>To do this, we need to initiate an event inside the component. The event can pass information up from the component to the webpage, using a <code>CustomEvent</code> object.
<a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent" target="_blank" rel="noopener noreferrer">MDN CustomEvent constructor reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">CoolComponent</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> clone <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btn <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>heading <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//use `bind` so the #handleClick function will treat `this` as a reference to</span>
    <span class="token comment">//the component instead of a reference to the button.</span>
  <span class="token punctuation">}</span>

  <span class="token function">#handleClick</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the button inside the component was clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">//increment the count variable</span>
    <span class="token keyword">let</span> happyEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'happy'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                          <span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;we can send anything we need&quot;</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">count</span><span class="token operator">:</span> count<span class="token punctuation">,</span>
                          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//happyEvent is an event that we want to send to the webpage.</span>
    <span class="token comment">//the event &quot;type&quot; is &quot;happy&quot;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>heading<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>happyEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>Here is the <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent" target="_blank" rel="noopener noreferrer">reference to the dispatchEvent function<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>With the <code>happy</code> event being dispatched from inside the component, the website developer can add a listener for this event.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> mc <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'happy'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//this will happen when the happy event bubbles up from inside the component</span>
  <span class="token keyword">let</span> params <span class="token operator">=</span> ev<span class="token punctuation">.</span>detail<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//the count instance member value from inside the component</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Back inside the component, if you want to <strong>stop</strong> the click event from bubbling up from the button to the parent webpage, then you can use the <code>stopPropagation</code> method inside that <code>#handleClick</code> method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token function">#handleClick</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the button inside the component was clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ev<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//this stops the click event from bubbling up to the parent webpage.</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Here is a more detailed tutorial on working with Custom Events inside Web Components.</p> <div title="Using Custom Events in Custom Web Components" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/wmGmKSLfVCY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="passing-functions-to-components"><a href="#passing-functions-to-components" class="header-anchor">#</a> Passing Functions to Components</h2> <p>Now, while we can frequently have functions connected to event listeners, like the ones above, and all the behaviour that we need can be embedded inside those functions. There will be times when we want to be able to provide a function from our own code and have an event inside the web component call that function.</p> <p>There are a couple ways for us to achieve this.</p> <p>First, in our own script we can add a listener to the web component element itself. This will work for the container of the component but not for elements that are inside of the shadowRoot.</p> <p>Second, and more effectively, we can pass the name of a function, as a string through an attribute in the HTML of our web component.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//an example function inside our own script, not the web component script</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Function f1 inside our own script.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cool-component</span> <span class="token attr-name">func</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>f1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cool-component</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>So, effectively what we are doing is passing the name of the function into the component's script.</p> <p>Inside our component script, in the <code>attributeChangedCallback</code> function, we can access that name.</p> <p>Next, we use the square bracket notation to access the function. In the same way that <code>window['document']</code> gives us access to the <code>document</code> object inside the global <code>window</code> object, we could use <code>window['f1']</code> to access our <code>f1</code> function and <code>window['f1']()</code> to run the <code>f1</code> function.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">attributeName<span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>attributeName<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'func'</span><span class="token operator">:</span>
      <span class="token comment">//when an attribute called func is given a value</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span> newVal <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//check and see if the window object has a property called `f1`</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> window<span class="token punctuation">[</span>newVal<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">//make sure that the property is a function</span>
          <span class="token comment">//save the function in a property that belongs to our component</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>firstFunction <span class="token operator">=</span> window<span class="token punctuation">[</span>newVal<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Once we have created and assigned the function to <code>this.firstFunction</code> we can then use it anywhere within our component, including in those click event listeners we created above.</p> <p><strong>There are a couple of issues though.</strong></p> <p>First, the keyword <code>this</code> is not going to work inside the click listener function as we have defined it. To get around this, we can assign our function to a variable that is local to the <code>connectedCallback</code> function. This can be used inside the listener without dealing with <code>this</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> func <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstFunction<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>btnYes<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ev.target is the button</span>
    <span class="token comment">// avoid using `this` inside here</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Yes button clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>An alternate approach to the above solution is to <code>bind</code> the event listener function to our component like the following:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//at this point in the code, `this` refers to the component.</span>
  <span class="token comment">// this.firstFunction is the property we created in the attributeChangedCallback method</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>btnYes<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleYesButton</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//call `bind()` on the handleYesButton function so it will use the same this as here</span>
<span class="token punctuation">}</span>

<span class="token function">handleYesButton</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// ev.target is the button</span>
  <span class="token comment">// and now `this` does refer to the component</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Yes button clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">firstFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//will work here now</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>The second problem goes back to the <code>if( typeof window[newVal] === 'function'){</code> line, where we were extracting the name of the function from attribute. This approach to validating a function works well if we have a normal script that is NOT a module. In modules, functions are NOT added to the window object when you declare them.</p> <p>So, to test if a function exists from a module we need to use the <code>eval()</code> method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token function">eval</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//newVal is a function inside the current or imported module.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Notice the how the comment in the above code sample says <strong>current or imported</strong> module. That is important. With the <code>eval()</code> method we are actually checking to see if there is actually some function with that name that we can call within the current context.</p> <p>If the function that we want to call is in the main page, then we can't call the function from inside the component.</p> <p>We actually need to bubble up an event from inside the component to the parent page with instructions to call the function. When we bubble up the instructions, it will again be the string name of the function, not a reference to the function itself. If you are calling a function whose name has been passed into a component then the function needs to exist inside the component module.</p> <h3 id="approaches-and-reasons-for-passing-functions"><a href="#approaches-and-reasons-for-passing-functions" class="header-anchor">#</a> Approaches and Reasons for Passing Functions</h3> <p>So, that solves the how do you can turn string names into function references. But this is not WHAT we would typically do.</p> <p>Think about the process of creating a component to use on a website.</p> <ul><li>Developer A designs and builds a component.</li> <li>Developer A writes the documentation telling other developers how to use the component.</li> <li>In that documentation they will list the internal public functions which can be called from the webpage.</li> <li>In that documentation they will list the CSS variables that can be used in the parent page to set values for the CSS inside the shadow DOM.</li> <li>Developer A will list events that will bubble up from inside (if any).</li> <li>Developer A is NOT going to list private functions inside the component because they can't be called from outside the component.</li></ul> <p>So, why would there be an attribute that can hold a function name?</p> <p>Components don't want to know the name of functions in the web page.</p> <p>However, Developer B, who is building the webpage might want to know when a button inside the component is clicked. And if that click doesn't bubble up (not all events do), Developer B might still want to use that button click to make one of their own functions run.</p> <p>So, Developer B, adds the name of one of their own functions to a component attribute as a string. Now the component can trigger a custom event internally. That custom event can contain a <code>detail</code> object which will deliver the name of the function back to the parent webpage. The parent webpage can extract the name of the function from the custom event detail and convert the string into an actual function reference to be called.</p> <p>Here is an example. The parent page has a component with a <code>func</code> attribute. The value is the name of a function inside the <code>main.js</code> script, attached to the webpage.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- main web page --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>The button in the component has been clicked <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> times.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">func</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateCount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//IIFE that runs after DOMContentLoaded</span>
  <span class="token keyword">let</span> component <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  component<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'applejuice'</span><span class="token punctuation">,</span> handleCustomEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleCustomEvent</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//when a  custom `applejuice` event bubbles out of the component</span>
  <span class="token keyword">let</span> detail <span class="token operator">=</span> ev<span class="token punctuation">.</span>detail<span class="token punctuation">;</span>
  <span class="token keyword">let</span> type <span class="token operator">=</span> ev<span class="token punctuation">.</span>type<span class="token punctuation">;</span> <span class="token comment">//applejuice</span>
  <span class="token keyword">let</span> func <span class="token operator">=</span> detail<span class="token punctuation">.</span>funcName<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token function">eval</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">===</span> <span class="token string">'applejuice'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//call the updateCount function</span>
    <span class="token function">eval</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">updateCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body p span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>span<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Inside the component we just have to add a click listener to the button, as shown in the event section above. Then inside the component private click listener function, we create a custom event with an <code>applejuice</code> type, and then dispatch it.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//inside the component click listener function</span>
<span class="token function">#handleClick</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  ev<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//do whatever internal things we need first</span>
  <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>functionNameFromAttribute<span class="token punctuation">;</span>
  <span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'applejuice'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">func</span><span class="token operator">:</span>f<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// assuming that a reference to the button is held in this.button</span>
<span class="token comment">// assuming that a reference to the function name in the attribute is held in this.functionNameFromAttribute</span>
<span class="token comment">// the custom applejuice event will bubble up to the webpage, out through the shadowRoot boundary</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="additional-component-behaviours"><a href="#additional-component-behaviours" class="header-anchor">#</a> Additional Component Behaviours</h2> <p>If you want to add additional functions to your class we can add either instance methods or static class methods.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Thing</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> numThings <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  id<span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
    Thing<span class="token punctuation">.</span>numThings <span class="token operator">=</span> Thing<span class="token punctuation">.</span>numThings <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> Thing<span class="token punctuation">.</span>numThings<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">doInstanceSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//an instance method</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My id is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">doClassSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//a class method.</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The total number of Things is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Thing<span class="token punctuation">.</span>numThings<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>Instance methods are methods that are attached to each object created by a class. The method knows which object they belong to. To call an instance method you put the name of the instance in front of the method name.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj1<span class="token punctuation">.</span><span class="token function">doInstanceSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj1.id is 1</span>
obj2<span class="token punctuation">.</span><span class="token function">doInstanceSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj2.id is 2</span>
obj3<span class="token punctuation">.</span><span class="token function">doInstanceSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj3.id is 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Class methods are declared with the word <code>static</code> in front of them. They belong to the class itself, not to any instance. The value of any static class variable is shared between all the instances. To access one of them, we put the name of the class in front of the property or method name.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Thing.numThings is 1</span>
Thing<span class="token punctuation">.</span><span class="token function">doClassSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The total number of Things is 1</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Thing.numThings is 2</span>
Thing<span class="token punctuation">.</span><span class="token function">doClassSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The total number of Things is 2</span>
<span class="token keyword">let</span> obj3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Thing.numThings is 3</span>
Thing<span class="token punctuation">.</span><span class="token function">doClassSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The total number of Things is 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>If you want to learn more about JavaScript class syntax, including static properties and private properties, watch this video:</p> <div title="JavaScript Classes 2021" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/tqBP5ZX8F0c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="creating-components-via-javascript"><a href="#creating-components-via-javascript" class="header-anchor">#</a> Creating Components via JavaScript</h2> <p>In your web page, if you want to create and append a web component without initially having it in the HTML, then you can create it the same way you would any other chunk of HTML. You would still need to add the script tag with <code>type=&quot;module&quot;</code> in your HTML or you can <code>import</code> the script for the web component, before running the below code.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> component <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'cool-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//which will trigger the component constructor</span>
<span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">,</span> <span class="token string">'slotname'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'The text that will be passed into &lt;slot name=&quot;slotname&quot;&gt;'</span><span class="token punctuation">;</span>
component<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//then add it to the page</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//which will trigger the connectedCallback method</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="free-ebook-reference-for-web-components"><a href="#free-ebook-reference-for-web-components" class="header-anchor">#</a> Free eBook reference for Web Components</h2> <p>I recently found this free eBook that you can also use as a reference for Web Components. There is also a link to the paid course on FrontEndMasters.com but you don't have to take the course to use the book.</p> <p><a href="https://htmlwithsuperpowers.netlify.app/get-started/" target="_blank" rel="noopener noreferrer">Dave Rupert's eBook on Web Components<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="using-icons-in-components"><a href="#using-icons-in-components" class="header-anchor">#</a> Using Icons in Components</h2> <p>So, you have a great idea for a web component but you want to add custom icons inside the component.</p> <p>The idea behind great web components is to be able to share a single file or single link with other developers which contain ALL the functionality and ALL the styling. We don't want users to have to download multiple files, add extra links to their web pages, and have to place the links in the correct files with the proper relative paths. That just creates a barrier to using your component.</p> <p>So, if the user isn't going to download extra files beyond the one JS file, then how do you include icons in your component?</p> <p>The answer is <code>SVG</code>.</p> <p>You can add an <code>&lt;img&gt;</code> element inside your component that points to an external resource url which loads an SVG file. However, if that URL ever fails, there will be no icon in the component. OR if the user goes offline, again there will be no icon in the component.</p> <p>So, we need to embed the SVG inside the component. The first way is to actually add the SVG directly inside the HTML.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2000/svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xlink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xlink<span class="token punctuation">&quot;</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 200 200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#ff0000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You can add an SVG element directly inside the HTML which is in your template that defines your component content. By using this approach you can use CSS to style the fills and strokes inside the SVG element. Think of the possibilities of using CSS with CSS properties (variables) that use the website branding colors to style the SVG element.</p> <p>With the SVG in the HTML you can also use CSS to add styles for pseudo-classes like <code>:hover</code> and <code>:active</code>.</p> <p>If you have no hover effects and want to style all the colors for the SVG directly inside of the SVG, you can also set an embedded SVG element as the <code>data:</code> URI for a <code>background-image</code> in your CSS.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">span.mysvg</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewBox%3D%220%200%20150%20150%22%20shape-rendering%3D%22geometricPrecision%22%20text-rendering%3D%22geometricPrecision%22%3E%0A%20%20%20%3Cpath%20d%3D%22M148.53438%2C177.20732c-9.34191%2C0-18.22272-1.97419-26.248-5.52812.687664-10.448517-7.501265-26.062374-13.281988-40.084948L84.74803%2C124.28495c-.72288-3.87797-1.10084-7.87726-1.10084-11.96483c0-35.83621%2C29.05098-64.88719%2C64.88719-64.88719s64.88719%2C29.05098%2C64.88719%2C64.88719c0%2C4.08757-.37796%2C8.08686-1.10084%2C11.96483l-23.117021%2C7.309302c-4.558202%2C6.668397-9.795934%2C22.79906-13.289519%2C39.570628-8.31888%2C3.87727-17.5965%2C6.04243-27.37981%2C6.04243v.00001Z%22%20transform%3D%22matrix%281.079663%200%200%201.079663-85.274786-45.668803%29%22%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-width%3D%222%22%2F%3E%0A%20%20%20%3Cellipse%20class%3D%22eyes%22%20rx%3D%2215%22%20ry%3D%2215%22%20transform%3D%22matrix%281.079663%200%200%201.079663%20100.940569%2060.010166%29%22%2F%3E%0A%20%20%20%3Cellipse%20class%3D%22eyes%22%20rx%3D%2215%22%20ry%3D%2215%22%20transform%3D%22matrix%281.079663%200%200%201.079663%2049.243998%2060.010166%29%22%2F%3E%0A%20%20%20%3Crect%20class%3D%22nose%22%20width%3D%225%22%20height%3D%2220%22%20rx%3D%220%22%20ry%3D%220%22%20transform%3D%22matrix%281.079663%200%200%201.079663%2076.345624%2074.801956%29%22%20stroke-width%3D%220%22%2F%3E%0A%20%20%20%3Crect%20class%3D%22nose%22%20width%3D%225%22%20height%3D%2220%22%20rx%3D%220%22%20ry%3D%220%22%20transform%3D%22matrix%281.079663%200%200%201.079663%2069.55046%2074.801956%29%22%20stroke-width%3D%220%22%2F%3E%0A%20%20%20%3Cpath%20d%3D%22M181.537773%2C150c-20.890965%2C4.507309-44.21305%2C4.96703-64.622002%2C0c15.543043%2C4.349274%2C47.854041%2C3.940847%2C64.621995%2C0h.000007Z%22%20transform%3D%22matrix%281.111375%200%200%201.079663-90.148342-48.851999%29%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%222%22%2F%3E%0A%20%20%20%3C%2Fsvg%3E'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Just remember that you will need to URL Encode the SVG element before adding it to the CSS in your component HTML template. The above example uses an embedded SVG image as the data uri background
image for a span with the CSS class name <code>mysvg</code>.</p> <div title="How to embed SVG Icons in a custom web component" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/VmPcJVeKiI8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://www.urlencoder.org/" target="_blank" rel="noopener noreferrer">Here is an online tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that you can use to convert an SVG to a URLEncoded version of the SVG element to use in your CSS.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/4/2025, 5:43:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/w2025/modules/hybrids/sub-classing.html" class="prev">
        Extending JS Classes
      </a></span> <span class="next"><a href="/w2025/modules/hybrids/libraries.html">
        Web Component Libraries
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/w2025/assets/js/app.87c858a9.js" defer></script><script src="/w2025/assets/js/2.ccdb61a5.js" defer></script><script src="/w2025/assets/js/30.2ba498f6.js" defer></script><script src="/w2025/assets/js/9.01890ce5.js" defer></script><script src="/w2025/assets/js/11.5fe5a40b.js" defer></script>
  </body>
</html>
